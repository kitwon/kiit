webpackJsonp([0x9db3763f2666],{284:function(n,e){n.exports={data:{allMarkdownRemark:{edges:[{node:{excerpt:"\nè¿™æ¬¡åšçš„æ˜¯ä¸€ä¸ªç±»ä¼¼teambitionçš„å›¢é˜Ÿåä½œç±»é¡¹ç›®ï¼Œå› ä¸ºä¸Šçº§åæ˜ äº¤äº’å’Œè§†è§‰æ–¹é¢éƒ½æ²¡æœ‰è¾¾åˆ°è¦æ±‚ï¼Œä»¥å‰çš„ä»£ç ä¹Ÿæ²¡æœ‰ç”¨æ¨¡å—åŒ–å’Œç”¨nodeåšä¸€äº›è‡ªåŠ¨åŒ–çš„å·¥ä½œï¼Œæ—§ä»£ç æ˜¯åŸºæœ¬æ”¹ä¸äº†çš„ï¼Œæ‰€ä»¥å°±æ²¡çœ‹ä»¥å‰çš„ä»£ç ï¼Œç›´æ¥çœ‹ç€äº¤äº’è·Ÿè®¾è®¡ç¨¿å°±å¼€æ’¸äº†ã€‚\nåº“é€‰æ‹©åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆé€‰æ‹©äº†ï¼Œangularç‰ˆæœ¬ä¸ç¨³å®šï¼Œpassï¼Œreact å’Œ vueä¹‹é—´ä¸ºä»€ä¹ˆé€‰åè€…å‘¢ï¼Œä¸€æ–¹é¢å—å…¬å¸æ”¿æ²»å› ç´ å½±å“ï¼Œå¦ä¸€æ–¹é¢vueæ–‡æ¡£æœ‰ä¸­æ–‡ï¼Œtemplateçš„å†™æ³•å¯¹æ–°æ‰‹ä¹Ÿæ¯”è¾ƒå‹å¥½ï¼Œè€ƒè™‘åˆ°åæœŸäººå‘˜é…ç½®å°±é€‰æ‹©vueäº†ã€‚\né‡æ„äº†4ä¸ªå¤§æ¨¡å—ï¼Œæ”¹ç‰ˆç”¨æ—¶å¤§æ¦‚ä¸€ä¸ªåŠæœˆï¼Œæµ‹è¯•æ—¶é—´ä¸€å‘¨å·¦å³ï¼ŒæœŸé—´æ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒå¤§å¡è¿›åº¦çš„é—®é¢˜ã€‚ä¸‹é¢é€šè¿‡å¯¹é¡¹ç›®çš„æ„å»ºï¼Œç»„ç»‡ï¼Œæµ‹è¯•ç­‰å·¥ä½œåšä¸‹è®°å½•ä»¥åŠåˆ†æã€‚\n\n# é¡¹ç›®æ„å»º\né¡¹ç›®åˆ›å»ºæ˜¯ä½¿ç”¨vue-cliåˆ›å»ºçš„ï¼Œæ¨¡ç‰ˆåˆ™æ˜¯ä½¿ç”¨æˆ‘è‡ªå·±ç»´æŠ¤çš„[vue-mpa](https://github.com/kitwon/vue-mpa)å¤šé¡µæ¨¡æ¿åˆ›å»ºçš„å•é¡µåº”ç”¨ğŸ¤©(å‡ºäºå¯¹è‡ªå·±çš„æ”¯æŒï¼Œå¯¹æ¨¡ç‰ˆbugçš„æµ‹è¯•ï¼Œä»¥åŠåˆ‡æ¢ä¸ºå•é¡µåº”ç”¨ä¹Ÿæ–¹ä¾¿)ã€‚é™¤äº†å®˜æ–¹åŸºæœ¬çš„åŠŸèƒ½å¤–ï¼Œé¡¹ç›®è¿˜åŠ å…¥äº†æ‰“åŒ…å®Œæˆåè‡ªåŠ¨åˆ é™¤å¹¶æ‹·è´åˆ°åå°é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œè‡ªåŠ¨ç”Ÿæˆjspæ¨¡æ¿ç­‰ä¸€äº›è‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚\n\n",frontmatter:{title:"å¹´åº•é¡¹ç›®å¤ç›˜",date:"2018-01-23",category:["å·¥ä½œ"],path:"/post/2017-review"}}},{node:{excerpt:"\n> è¿™ç¯‡æ–‡ç« å¤§æ¦‚5500å­—ä½“å·¦å³ï¼Œå¯èƒ½éœ€è¦æµªè´¹5-10åˆ†é’Ÿå»é˜…è¯»ã€‚\n\n----\n\n> ç°åœ¨javascriptæ€§èƒ½å·²ç»è¶³å¤Ÿå¿«äº†ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„web appè¿˜æ˜¯ä¼šå‡ºç°å¡é¡¿çš„æƒ…å†µã€‚è¿™æ—¶å€™æˆ‘ä»¬é¦–å…ˆä¼šæƒ³åˆ°æ˜¯å»ä¼˜åŒ–æˆ‘ä»¬çš„jsä»£ç ï¼Œæ¯”å¦‚å°†forå¾ªç¯æ”¹ä¸ºwhileï¼Œä½†å…¶å®è¿™äº›å¾®ç²’åº¦çš„ä¼˜åŒ–å…¶å®å¯¹æ€§èƒ½æç¤ºæ˜¯çš®æ¯›ã€‚çœ‹å®Œgoogleçš„[render performance](https://developers.google.com/web/fundamentals/performance/rendering/)å¯¹å‰ç«¯æ¸²æŸ“ä¼˜åŒ–æœ‰äº†ä¸€ä¸ªæ–°çš„è®¤è¯†ã€‚\n\n# å‡ ä¸ªé‡è¦æ¦‚å¿µ\n## 60fpsä¸è®¾å¤‡åˆ·æ–°ç‡\nç›®å‰å¤§å¤šæ•°è®¾å¤‡çš„åˆ·æ–°ç‡éƒ½æ˜¯60fpsã€‚ç©æ¸¸æˆçš„éƒ½çŸ¥é“ï¼Œå¦‚æœå½“å‰åˆ·æ–°ç‡åœ¨30-60fpsï¼Œæ¸¸æˆè¿è¡Œä¼šåŸºæœ¬æµç•…ï¼Œè€Œå°‘äº60fpså°±ä¼šå‡ºç°å¡é¡¿çš„çŠ¶å†µäº†ã€‚web appåŸºæœ¬ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¦‚æœæµè§ˆå™¨æ¸²æŸ“å¸§çªç„¶ä¸‹é™ï¼Œæˆ–è€…å¸§æ•°ä½çš„æƒ…å†µï¼Œå°±å‡ºç°ç¨‹åºè¿è¡Œå¡çš„æƒ…å†µäº†ã€‚\n\nå…¶ä¸­æ¯ä¸ªå¸§çš„é¢„ç®—æ—¶é—´ä»…æ¯” 16 æ¯«ç§’å¤šä¸€ç‚¹ (1 ç§’/ 60 = 16.66 æ¯«ç§’)ã€‚ä½†å®é™…ä¸Šï¼Œæµè§ˆå™¨æœ‰æ•´ç†å·¥ä½œè¦åšï¼Œå› æ­¤æ‚¨çš„æ‰€æœ‰å·¥ä½œéœ€è¦åœ¨ 10 æ¯«ç§’å†…å®Œæˆã€‚å¦‚æœæ— æ³•ç¬¦åˆæ­¤é¢„ç®—ï¼Œå¸§ç‡å°†ä¸‹é™ï¼Œå¹¶ä¸”å†…å®¹ä¼šåœ¨å±å¹•ä¸ŠæŠ–åŠ¨ã€‚ æ­¤ç°è±¡é€šå¸¸ç§°ä¸ºå¡é¡¿ï¼Œä¼šå¯¹ç”¨æˆ·ä½“éªŒäº§ç”Ÿè´Ÿé¢å½±å“ã€‚\n\n",frontmatter:{title:"æ„å»º60fps-web-app",date:"2017-09-13",category:["å‰ç«¯"],path:"/post/60fps-web-app"}}},{node:{excerpt:"\nåœ¨ä¹‹å‰å·²ç»å†™è¿‡ä¸€ç¯‡å…³äºå‰ç«¯å•å…ƒæµ‹è¯•çš„æ–‡ç« ï¼Œç›¸å…³æ¦‚å¿µå°±ä¸ä½œé˜è¿°äº†ï¼Œæœ‰å…´è¶£æˆ–è€…æœ‰éœ€æ±‚çš„åŒå­¦å¯ä»¥åœ¨å¾€æœŸæ‰¾ä¸€ä¸‹ã€‚ç„¶åè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹[jest](http://facebook.github.io/jest/)ï¼Œè¿™æ˜¯ä¸€ä¸ª[Facebook OpenSource](https://code.facebook.com/projects/)çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚é¡¹ç›®å·²ç»é›†æˆå¥½äº†ä¸€äº›æµ‹è¯•ç›¸å…³çš„æ¡†æ¶çš„ä»£ç ï¼Œä¸»æ‰“çš„æ˜¯é›¶é…ç½®æµ‹è¯•å¹³å°ï¼ˆreactä¸­åº”è¯¥ç®—æ˜¯é›¶é…ç½®ï¼Œå…¶ä»–é¡¹ç›®è¿˜æ˜¯è¦æ‰‹åŠ¨é…ç½®ä¸€ä¸‹çš„ï¼‰ï¼Œé‡Œé¢ä¸€ä¸ªæ¯”è¾ƒå¥½åœ°æ–¹æ˜¯æ”¯æŒ**å¿«ç…§æµ‹è¯•**(ä¸ºdomç»“æ„ç”Ÿæˆä¸€ä¸ªå¿«ç…§ï¼Œæ¯æ¬¡æµ‹è¯•éƒ½å¯¹æ¯”domç»“æ„)ã€‚å…¶ä»–ä¸€äº›å¥½ç”¨çš„åœ°æ–¹å¯ä»¥è‡ªå·±æŸ¥çœ‹æ–‡æ¡£ï¼Œæœ‰ä¸­æ–‡ã€‚\n\n# é…ç½®\né¦–å…ˆæ˜¯å®‰è£…jest, jset-vue-preprocessor(jestçš„ä¸€ä¸ªæ’ä»¶ï¼Œç”¨æ¥è§£æ'.vue'æ–‡ä»¶çš„)ã€‚\n```shell\n$npm install jest jest-vue-preprocessor --save-dev\n\n$yarn add jest jest-vue-preprocessor --save\n```\n\n",frontmatter:{title:"åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨jestè¿›è¡Œå•å…ƒæµ‹è¯•",date:"2017-08-18",category:["å‰ç«¯å·¥å…·"],path:"/post/vue-jest-test"}}},{node:{excerpt:"\n# ç±»ç†è®º\nç±»ï¼ç»§æ‰¿æè¿°äº†ä¸€ç§ä»£ç çš„ç»„ç»‡ç»“æ„å½¢å¼ï¼Œè¿™ä¸ªç†è®ºåœ¨è½¯ä»¶è®¾è®¡ä¸­ä¸€ç›´ä½œä¸ºä¸€ä¸ªä¸»å¯¼çš„è§’è‰²ã€‚é€šè¿‡å­¦ä¹ ç±»ç†è®ºï¼Œèƒ½ä¸ºæ›´å¥½åœ°å­¦ä¹ jsä¸­çš„è®¾è®¡æ¨¡å¼å’Œå¯¹jsä¸­åŸå‹é“¾çš„ç†è§£æ‰“ä¸‹åŸºç¡€ã€‚\n\nç±»æ˜¯åœ¨è½¯ä»¶ä¸­å¯¹çœŸå®ä¸–ç•Œé—®é¢˜é¢†åŸŸçš„å»ºæ¨¡æ–¹æ³•ã€‚å¦‚ä¸€ä¸ªç»å¸¸çœ‹è§çš„äº¤é€šä¾‹å­ã€‚**æ±½è½¦**å¯ä»¥è¢«çœ‹ä½œ**äº¤é€šå·¥å…·ä¸­çš„ä¸€ç§**ï¼Œæ‰€ä»¥åœ¨è½¯ä»¶å¼€å‘æ—¶å¯ä»¥å®šä¹‰ä¸€ä¸ª`Vehicle`ç±»ï¼Œ`Vehicle`ä¸­åŒ…å«æ¨è¿›å™¨ï¼ˆå¼•æ“ï¼‰ã€è½½äººèƒ½åŠ›ç­‰æ–¹æ³•ã€‚å®šä¹‰`Car`æ—¶ï¼Œåªè¦å£°æ˜å®ƒç»§æ‰¿æˆ–è€…æ‹“å±•`Vehicle`è¿™ä¸ªåŸºç¡€å®šä¹‰å°±è¡Œäº†ï¼Œå…¶ä»–äº¤é€šå·¥å…·å¦‚èˆ¹ã€é£æœºä¹Ÿå¯ä»¥ç»§æ‰¿`Vehicle`ã€‚**è¿™å°±æ˜¯ç±»çš„å®ä¾‹åŒ–ä¸ç»§æ‰¿**ã€‚\n\nç±»çš„å¦å¤–ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯**å¤šæ€**ï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯è¯´å¤«ç±»çš„é€šç”¨è¡Œä¸ºå¯ä»¥è¢«å­ç±»æ›´ç‰¹æ®Šçš„è¡Œä¸ºé‡å†™ã€‚\n\njavascriptä¸­ä¹Ÿæœ‰ç±»ä¸­çš„`new`å’Œ`instanceof`ï¼Œè¿˜æœ‰ES6ä¸­çš„`class`å…³é”®å­—ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯è¯´æ˜jsä¸­æœ‰**ç±»**çš„ã€‚javascriptä¸­åªæ˜¯ä¸ºäº†æ»¡è¶³ç±»çš„è®¾è®¡éœ€æ±‚è€Œæä¾›ä¸€äº›ç±»ä¼¼çš„è¯­æ³•ã€‚\n\n## jsä¸­å®ç°ç±»å¤åˆ¶(æ··å…¥)\njavascriptä¸­çš„å¯¹è±¡æœºåˆ¶å¹¶ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œå¤åˆ¶è¡Œä¸ºï¼Œç®€å•æ¥è¯´javascriptä¸­åªæœ‰å¯¹è±¡ï¼Œå¹¶ä¸å­˜åœ¨å¯ä»¥å®ä¾‹çš„ç±»ã€‚ä¸€ä¸ªå¯¹è±¡å¹¶ä¸ä¼šå¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œåªä¼šæŠŠå®ƒå…³è”èµ·æ¥(prototype)ã€‚\n\n",frontmatter:{title:"æ·±å…¥å­¦ä¹ javascript-ç±»",date:"2017-07-20",category:null,path:"/post/js-class"}}},{node:{excerpt:"\n# å…³äºthis\n\n`this`åº”è¯¥æ˜¯javascriptä¸­ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æœºåˆ¶äº†ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­æˆ‘ä»¬å¯èƒ½æœ‰æ„æ— æ„éƒ½ä¼šä½¿ç”¨åˆ°è¿™ä¸ªæœºåˆ¶ï¼Œä½†æ˜¯`this`çš„å·¥ä½œæœºåˆ¶çœŸæ­£äº†è§£çš„å¯èƒ½åªæœ‰çš®æ¯›ï¼Œé€šè¿‡å­¦ä¹ è¿™ä¸€æœºåˆ¶ï¼Œèƒ½å¤Ÿæé«˜å¯¹jsä»£ç çš„ç†è§£å’Œé˜…è¯»èƒ½åŠ›ï¼Œè¿˜æœ‰å¯¹jsç¨‹åºè®¾è®¡æ¨¡å¼æœ‰ç€æ›´æ·±çš„ç†è§£ã€‚\n\n# thisçš„æŒ‡å‘\nthisæ˜¯è¿è¡Œæ—¶è¿›è¡Œç»‘å®šçš„ï¼Œè€Œä¸æ˜¯ç¼–å†™æ—¶ç»‘å®šçš„ï¼Œå®ƒçš„ä¸Šä¸‹æ–‡å–å†³äºå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶ã€‚thisçš„ç»‘å®šå’Œå‡½æ•°å£°æ˜çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªå–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚\n\né€šè¿‡åˆ†æè°ƒç”¨ä½ç½®ï¼Œå°±èƒ½çŸ¥é“thisåˆ°åº•å¼•ç”¨çš„æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥ï¼Œå¯»æ‰¾è°ƒç”¨ä½ç½®å°±èƒ½å¼„æ¸…ä¸Šé¢çš„é—®é¢˜ï¼Œé€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œå°±èƒ½å¾ˆå¥½åœ°ç†è§£è¿™ä¸ªé—®é¢˜ï¼š\n```javascript\nfunction baz() {\n  // å½“å‰è°ƒç”¨æ ˆæ˜¯ baz\n  // å½“å‰è°ƒç”¨ä½ç½®æ˜¯å…¨å±€ä½œç”¨åŸŸ\n\n  console.log('baz');\n  bar(); // barçš„è°ƒç”¨ä½ç½®\n}\n\nfunction bar() {\n  // å½“å‰çš„è°ƒç”¨æ ˆæ˜¯ baz -> bar\n  // å½“å‰çš„è°ƒç”¨ä½ç½®æ˜¯baz\n\n  console.log('bar');\n  foo();\n}\n\nfunction foo() {\n  // å½“å‰çš„è°ƒç”¨æ ˆæ˜¯ baz -> bar -> foo\n  // å½“å‰çš„è°ƒç”¨ä½ç½®æ˜¯bar\n\n  console.log('foo');\n}\n\nbaz();\n```\n\n",frontmatter:{title:"æ·±å…¥å­¦ä¹ javascript - this",date:"2017-06-27",category:null,path:"/post/js-this"}}},{node:{excerpt:"\nwebpack2å·²ç»å‘å¸ƒäº†å¥½ä¸€æ®µæ—¶é—´äº†ã€‚ä½†æ˜¯å› ä¸ºä¹‹å‰å·¥ä½œçš„å…³ç³»æ²¡æœ‰å¥½å¥½ç ”ç©¶ä¸€ä¸‹ï¼Œåé¢å·¥ä½œåº”è¯¥ä¼šç”¨å¾—ä¸Šï¼Œè€Œä¸”è¶ç€è¿™æ®µæ—¶é—´æœ‰ç©ºï¼Œè¿˜æœ‰åœ¨ç†Ÿæ‚‰vimï¼Œå°±é¡ºä¾¿æ‹¿è¿™æ¥ç»ƒç»ƒæ‰‹äº†ã€‚\n\n# ä»webpack1ä¸­è¿ç§»\nå®˜æ–¹å·²ç»ç»™å‡ºäº†è¯¦ç»†çš„[è¿ç§»æŒ‡å—](https://webpack.js.org/guides/migrating/)ï¼Œæ”¹åŠ¨å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯ä¼˜åŒ–å´è›®å¤šçš„ï¼Œå¦‚ç¼–è¯‘é€Ÿåº¦ï¼Œä»£ç ä¼˜åŒ–ç­‰ã€‚å¦‚æœä½ çš„é¡¹ç›®æ­£åœ¨ç”¨webpackï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°ç‰ˆæœ¬è¿˜æ˜¯æŒºå€¼å¾—è¿ç§»çš„ã€‚\n\n## é…ç½®æ–‡ä»¶\nå¦‚æœå‡çº§webpackä¹‹åç›´æ¥è¿è¡Œå‘½ä»¤çš„è¯åº”è¯¥ä¼šçœ‹åˆ°ä¸€ç‰‡çº¢çš„ï¼Œå¯ä»¥çœ‹å‡ºé…ç½®é¡¹æœ‰æ”¹åŠ¨ï¼Œä¸‹é¢æ•´ç†ä¸€ä¸‹ç»å¸¸ä½¿ç”¨åœ°æ–¹çš„æ”¹åŠ¨ã€‚\n\n### `module.loaders`å˜æˆ`module.rules`\næ—§çš„`module.loader`è¢«`module.rules`å–ä»£ï¼Œåè€…å…è®¸é…ç½®`loader`æ›´å¤šé€‰é¡¹ï¼Œå…·ä½“æŸ¥çœ‹æ–‡æ¡£[module.rules](https://webpack.js.org/configuration/module/#module-rules)\n\n```javascript\n// ...\nmdoule: {\n    rules: [\n        {\n            test: /\\.css$/,\n            use: [\n                { loader: 'style-loader' },\n                {\n                    loader: 'css-loader',\n                    options: { module: true }\n                }\n            ]\n        },\n        {\n            test: /\\.jsx$/,\n            loader: 'babel-loader',\n            options: {\n                // ...\n            }\n        }\n    ]\n}\n// ...\n```\n\n",frontmatter:{title:"webpack2æ–°ç‰¹æ€§&è¿ç§»",date:"2017-06-24",category:["å‰ç«¯å·¥å…·"],path:"/post/webpack2"}}},{node:{excerpt:"\n# ä»€ä¹ˆæ˜¯é—­åŒ…\nè®°å¾—åˆšå¼€å§‹ç”¨jsçš„æ—¶å€™å°±å¬è¿‡é—­åŒ…è¿™ä¸ªæ¦‚å¿µï¼Œä¸€å¼€å§‹è§‰å¾—åªæ˜¯ä¸€ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œæ²¡æœ‰å¤ªæ·±å…¥äº†è§£ï¼Œç½‘ä¸ŠæŸ¥èµ„æ–™çš„è§£é‡Šä¸€èˆ¬æ˜¯ï¼šå‡½æ•°æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œæœ€å®¹æ˜“ç”Ÿæˆé—­åŒ…çš„æ–¹å¼ä¸€èˆ¬æ˜¯å‡½æ•°é‡Œé¢å¥—å‡½æ•°ã€‚\n\n> å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œã€‚\n--- ä½ ä¸çŸ¥é“çš„javascriptï¼ˆä¸Šå·ï¼‰\n\nç„¶åçœ‹ä¸ªä¾‹å­\n```javascript\nfunction foo() {\n\tvar a = 2;\n\n\tfuntion bar() {\n\t\tconsole.log(a);\n\t}\n\n\tbar();\n}\n\nfoo();\n```\nå¦‚æœæŒ‰ä¸Šé¢ç¬¬ä¸€æ¡çš„å®šä¹‰ï¼Œè¿™é‡Œä¸€å®šæ˜¯ç”Ÿæˆäº†é—­åŒ…ï¼Œä½†æ˜¯**ç¡®åˆ‡çš„è¯´å¹¶ä¸æ˜¯**ï¼Œè¿™é‡Œæœ€å‡†ç¡®çš„è¯´æ˜¯`bar`å¯¹`a`çš„å¼•ç”¨æ–¹å¼æ˜¯è¯æ³•ä½œç”¨åŸŸçš„æŸ¥æ‰¾è§„åˆ™ï¼Œè€Œè¿™äº›åªæ˜¯**é—­åŒ…**çš„ä¸€éƒ¨åˆ†ã€‚ç„¶åå†çœ‹æ¸…æ™°é—­åŒ…çš„ä¾‹å­\n\n```javascript\nfucntion foo() {\n\tvar a = 2;\n\n\tfunction bar() {\n\t\tconsole.log(a)\n\t}\n\n\treturn bar;\n}\n\nvar baz = foo()ï¼›\n\nbaz(); // è¿™å°±æ˜¯é—­åŒ…æ•ˆæœ\n```\n\n",frontmatter:{title:"æ·±å…¥å­¦ä¹ javascript-é—­åŒ…",date:"2017-06-14",category:null,path:"/post/js-closures"}}},{node:{excerpt:"\nä¹‹å‰ä¸€ç›´æœ‰å­¦ä¹ pythonï¼Œä½†æ˜¯ä¸€ç›´éƒ½æ˜¯åœ¨å­¦ä¸€äº›æ¯”è¾ƒåŸºç¡€çš„ä¸œè¥¿ï¼Œæ‰€åœ¨åœ¨è¿™æ®µç©ºé—²çš„æ—¶é—´æ‰“ç®—ç³»ç»Ÿå­¦ä¸€ä¸‹pythonã€‚åœ¨è¿™ä¼šä½¿ç”¨pythonå†™ä¸€ä¸ªçˆ¬ç™¾ç§‘çš„ç®€å•çˆ¬è™«ï¼Œé¦–å…ˆåˆ†æä¸‹çˆ¬è™«çš„éœ€æ±‚ã€‚\n\n# ä¸»è¦éœ€æ±‚\nè¿™ä¸ªdemoä¸­çˆ¬è™«æœ‰3ä¸ªä¸»è¦æ¨¡å—ï¼Œ**URLç®¡ç†å™¨**ã€**ä¸‹è½½å™¨**ã€**è§£æå™¨**\n* URLç®¡ç†å™¨ä¸»è¦å¤„ç†çˆ¬å–çš„URLçš„çŠ¶æ€ã€‚\n* ä¸‹è½½å™¨ä¼šé€šè¿‡**URLç®¡ç†å™¨**ä¼ é€è¿‡æ¥æœ‰æ•ˆURLè¿›è¡Œä¸‹è½½ã€‚\n* è§£æå™¨ä¼šå°†**ä¸‹è½½å™¨**ä¸‹è½½çš„å†…å®¹è§£ææˆå­—ç¬¦ä¸²ï¼Œå†è¿›è¡Œä¿å­˜ã€‚å¦‚æœè§£æå‡ºæœ‰æ•ˆURLå†ä¼ ç»™**URLç®¡ç†å™¨**è¿›è¡Œé‡å¤æ“ä½œã€‚\n\n## å…¥å£ç¨‹åº\n`spider_main`æ–‡ä»¶ä¸ºç¨‹åºå…¥å£ï¼Œå¤„ç†æ•´ä¸ªçˆ¬è™«çš„è¿è¡Œé€»è¾‘\n\n",frontmatter:{title:"ç”¨pythonå†™ä¸€ä¸ªç®€å•çˆ¬è™«",date:"2017-06-11",category:null,path:"/post/python-crawler"}}},{node:{excerpt:"\n# å‰è¨€\nä½¿ç”¨jså·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸€å¼€å§‹è§‰å¾—jsåªæ˜¯ä¸€é—¨ç©å…·è¯­è¨€ï¼Œç”¨æ¥åšåšå‰ç«¯äº¤äº’æ•ˆæœã€‚ä½†æ˜¯éšç€è¶Šæ¥è¶Šæ·±å…¥ï¼Œæ…¢æ…¢å‘ç°jsçš„å…¶ä»–ä¼˜ç‚¹ï¼šçµæ´»çš„è‡ªç”±çš„ä»£ç ç¼–å†™å¸¦æ¥å¤šç§å¤šæ ·çš„è®¾è®¡æ–¹å¼ï¼Œä»¤äººæ…¢æ…¢ç€è¿·ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™éƒ½æ„Ÿè§‰åªæ˜¯åœç•™åœ¨å¦‚ä½•ä½¿ç”¨jså®ç°ç›¸å…³çš„åŠŸèƒ½ï¼Œå¶å°”é‡åˆ°ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µæˆ–è€…éœ€è¦æ·±åº¦ä¼˜åŒ–çš„ç‚¹ï¼Œå°±ä¼šæ„Ÿåˆ°æƒ˜ç„¶ï¼Œä¸ºäº†æ‰“ç ´è¿™å°´å°¬æƒ…å†µï¼Œæ‰“ç®—å¼€å§‹è¯»ç›¸å…³çš„ä¸€äº›ä¹¦ç±æ¥åˆ†æjsæ›´æ·±å±‚çš„è®¾è®¡è¿˜æœ‰ä½¿ç”¨æ–¹å¼ï¼Œä»è€Œâ€œè¾¾åˆ°çŸ¥å…¶ç„¶ä¸”çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚\n\n# ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ\nJSä¸­æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨æ‰§è¡Œç¯å¢ƒä¸­èƒ½å¤Ÿå‚¨å­˜å˜é‡ä¸­çš„å€¼ï¼Œå¹¶ä¸”èƒ½åœ¨ä¹‹åå¯¹å€¼è¿›è¡Œè®¿é—®æˆ–è€…ä¿®æ”¹ã€‚æ¢å¥è¯è¯´ï¼Œè§„å®šå˜é‡å‚¨å­˜åœ¨å“ªé‡Œï¼Œç¨‹åºè¦å¦‚ä½•æ‰¾åˆ°è¿™äº›å˜é‡ï¼Œè¿™å¥—è§„åˆ™å°±ç§°ä¸º**ä½œç”¨åŸŸ**ã€‚\n\n\n\n## ç†è§£ä½œç”¨åŸŸæ‰§è¡Œè¿‡ç¨‹\nå¦‚åœ¨`var a = 2`æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåˆ†åˆ«æœ‰å¼•æ“ã€ç¼–è¯‘å™¨ã€ä½œç”¨åŸŸä¸‰ä¸ªå‚ä¸äº†è¿™æ¬¡è¿‡ç¨‹ã€‚\n\né¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šå°†è¿™æ®µç¨‹åºåˆ†è§£æˆè¯æ³•å•å…ƒï¼Œç„¶åå°†è¯æ³•å•å…ƒè§£ææˆä¸€ä¸ªæ ‘ç»“æ„ã€‚\n1. é‡åˆ°var aï¼Œç¼–è¯‘å™¨ä¼šåœ¨**ä½œç”¨åŸŸ**ä¸­æŸ¥æ‰¾æ˜¯æœ‰å·²ç»å­˜åœ¨æœ‰è¯¥åç§°çš„å˜é‡ã€‚å¦‚æœæ˜¯ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥è¿™ä¸€å£°æ˜ï¼Œç»§ç»­ç¼–è¯‘ï¼›å¦åˆ™ï¼Œä¼šè¦æ±‚ä½œç”¨åŸŸåœ¨å½“å‰ä½œç”¨åŸŸé›†åˆä¸­å£°æ˜ä¸€ä¸ªæ–°å˜é‡ï¼Œå¹¶å‘½åä¸ºaã€‚\n2. æ¥ä¸‹æ¥ï¼Œç¼–è¯‘å™¨ä¼šä¸º**å¼•æ“**ç”Ÿæˆè¿è¡Œæ—¶æ‰€éœ€çš„ä»£ç ï¼Œä»£ç ç”¨æ¥å¤„ç†`a = 2`è¿™ä¸ªèµ‹å€¼æ“ä½œã€‚å¼•æ“è¿è¡Œæ—¶ä¼šé¦–å…ˆè¯¢é—®**ä½œç”¨åŸŸ**å½“å‰ä½œç”¨é›†åˆæ˜¯å¦æœ‰ä¸€ä¸ª`a`çš„å˜é‡ã€‚å¦‚æœæ˜¯ï¼Œ**å¼•æ“**å°±ä¼šä½¿ç”¨è¿™ä¸ªå˜é‡ï¼›å¦‚æœä¸æ˜¯ï¼Œå¼•æ“ä¼šç»§ç»­æŸ¥æ‰¾è¯¥å˜é‡ã€‚å¦‚æœ**å¼•æ“**æ‰¾åˆ°`a`å˜é‡ï¼Œå°±ä¼šèµ‹å€¼2ã€‚å¦åˆ™ï¼Œ**å¼•æ“**ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\n\n**æ€»ç»“**ï¼šå˜é‡èµ‹å€¼åˆ†åˆ«æœ‰ä¸¤ä¸ªåŠ¨ä½œï¼Œ**ç¼–è¯‘å™¨**ä¼šåœ¨å½“å‰**ä½œç”¨åŸŸ**ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼ˆå¦‚æœä¹‹å‰æ²¡æœ‰å£°æ˜è¿‡ï¼‰ï¼Œç„¶ååœ¨è¿è¡Œæ—¶å¼•æ“ä¼šåœ¨**ä½œç”¨åŸŸ**ä¸­æŸ¥æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœèƒ½æ‰¾åˆ°å°±å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚\n\n",frontmatter:{title:"æ·±å…¥å­¦ä¹ javascript--ä½œç”¨åŸŸ",date:"2017-05-31",category:null,path:"/post/js-scope"}}},{node:{excerpt:"\n# é¢˜ç›®\nä¹‹å‰åœ¨YYé¢è¯•çš„æ—¶å€™é‡åˆ°è¿‡çš„ä¸€é¢˜: å®ç°add(1)(2)(3)ï¼Œè¿”å›6ï¼Œæ³¨æ„å¯æ‹“å±•æ€§ã€‚\nå½“æ—¶ç¬¬ä¸€ååº”å°±æ˜¯ç”¨é€’å½’å®ç°\n```javascript\nfunction add(x) {\n\tvar fn = function(y) {\n\t\treturn add(x + y);\n\t}\n\n\treturn fn;\n}\n\nconsole.log(add(1)(2)(3))\n```\n\n",frontmatter:{title:"jså®ç°add(1)(2)(3)",date:"2017-05-28",category:["javascript"],path:"/post/add-chain"}}},{node:{excerpt:"\nè€å‰ç«¯éƒ½çŸ¥é“ï¼Œjsåˆ†ä¸ºåŒæ­¥(sync)å’Œå¼‚æ­¥(async)ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥ç®€å•æ¥è¯´å°±æ˜¯æ’é˜Ÿï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚å¼‚æ­¥åˆ™æ˜¯å‡½æ•°æ‰§è¡Œå®Œåæ‰§è¡Œå®ƒçš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸‹ä¸€ä¸ªå‡½æ•°ä¸ç­‰ä¸Šä¸€ä¸ªå‡½æ•°å®Œæˆå°±å¼€å§‹æ‰§è¡Œã€‚ä½¿ç”¨å›è°ƒå‡½æ•°èƒ½è§£å†³å¤§éƒ¨åˆ†çš„å¼‚æ­¥é—®é¢˜ï¼Œä½†æ˜¯å›è°ƒä¸€å¤šå°±å¾ˆå®¹æ˜“æ‰è¿›â€˜å›è°ƒåœ°ç‹±â€™ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ[promise](https://promisesaplus.com/)ï¼ˆCommonJSå·¥ä½œç»„æå‡ºçš„ä¸€ç§è§„èŒƒï¼‰ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºä¼˜é›…çš„è§£å†³æ–¹å¼ã€‚\n\nä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå°è¯•å®ç°ä¸€ä¸ªpromiseï¼Œé€šè¿‡å®ç°è¿™ä¸ªdemoï¼Œèƒ½æ›´å¥½åœ°ç†è§£promiseçš„è¿è¡Œæ–¹å¼ï¼Œä½¿å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™æ›´åŠ ç†Ÿç»ƒï¼Œä¹Ÿèƒ½ä»å®ç°åŸç†ä¸­è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œä»è€Œè¾¾åˆ°â€œçŸ¥å…¶ç„¶ä¸”çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚\n\n\n\n# åˆæ­¥æ„å»ºä¸€ä¸ªPromise\næˆ‘ä»¬çœ‹ä¸‹å¹³æ—¶ä½¿ç”¨promiseå¤„ç†å¼‚æ­¥å‡½æ•°æ—¶å€™çš„ä½¿ç”¨æ–¹å¼ï¼Œä»è°ƒç”¨æ–¹æ³•çœ‹ä¸‹å¤§æ¦‚ç”¨ä»€ä¹ˆæ–¹å¼å»å®ç°\n```javascript\n// ä¾‹1\nfunction getAsyncData() {\n\treturn new Promise(function(resolve, reject) {\n\t\tsetTimeout(function() {\n\t\t\tresolve('promise done!')\n\t\t}, 1000)\n\t})\n}\n\ngetAsyncData().then(function(result) {\n\tconsole.log(result);\n}).then(function() {\n\tconsole.log('done too!');\n})\n```\n\n",frontmatter:{title:"Promiseçš„ç®€å•å®ç°",date:"2017-05-17",category:["å‰ç«¯"],path:"/post/js-promise"}}},{node:{excerpt:"\n# ä»€ä¹ˆæ˜¯å•å…ƒ-æµ‹è¯•?\n- å•å…ƒå°±æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¨¡å—åŒ–çš„ç¨‹åºï¼Œéƒ½åº”è¯¥æ˜¯æœ‰è®¸å¤šä¸ªå•å…ƒæ„æˆï¼Œå•å…ƒèƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶åä¸å…¶ä»–å•å…ƒè¿›è¡Œäº¤äº’ ï¼Œä»è€Œå®Œæˆæ•´ä¸ªç¨‹åºçš„åŠŸèƒ½ã€‚\n- è€Œæµ‹è¯•ï¼Œå°±æ˜¯æµ‹è¯•å•¦ã€‚\n\næ‰€ä»¥å•å…ƒæµ‹è¯•é€šä¿—ç‚¹è®²å°±æ˜¯å¯¹ç¨‹åºæ¯ä¸ªç‹¬ç«‹çš„å•å…ƒåˆ†åˆ«æµ‹è¯•ï¼Œä¿è¯æ„æˆç¨‹åºçš„æ¯ä¸ªæ¨¡å—çš„æ­£ç¡®æ€§ï¼Œä»è€Œä¿è¯æ•´ä¸ªç¨‹åºçš„æ­£ç¡®è¿è¡Œã€‚\n\n# ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ\nå•å…ƒæµ‹è¯•åœ¨å‰ç«¯è¿˜æ˜¯ä¸å¤ªæ™®åŠçš„ï¼Œå› ä¸ºåˆšå¼€å§‹å‰ç«¯ä¹Ÿæ˜¯åå‘â€˜UIâ€™é‚£ä¸€å—çš„ï¼Œä½†éšç€nodeçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šéâ€˜UIâ€™çš„å‰ç«¯ä»£ç ï¼Œä¸€ä¸ªå›¢é˜Ÿä¹Ÿè¶Šæ¥è¶Šå¤šäººå‚åŠ å¼€å‘ï¼Œå¦‚æœç³»ç»Ÿä¸€å¤æ‚ï¼Œåˆæˆ–è€…ä½ çš„æ¨¡å—æäº¤åˆ°npmä¸Šé¢çš„è¯ï¼Œä¸€å‡ºé”™åŸºæœ¬å°±GGäº†ã€‚\nåˆæˆ–è€…ä½ è¿™æ ·æƒ³ï¼Œæµ‹è¯•æ˜¯é€ƒä¸æ‰çš„ï¼Œè¦ä¹ˆåœ¨devä¸Šæµ‹è¯•ï¼Œè¦ä¹ˆåœ¨prodä¸Šæµ‹è¯•ï¼Œæ€ä¹ˆéƒ½å¾—æµ‹è¯•ï¼Œè€Œä¸”æ¯æ¬¡æäº¤éƒ½è¦æµ‹è¯•ï¼Œä¸ºä»€ä¹ˆä¸å†™è‡ªåŠ¨æµ‹è¯•å‘¢ã€‚æˆ‘ä¹Ÿç›¸ä¿¡å¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿæœ‰å†™å®Œè·‘è·‘çœ‹çš„ä¹ æƒ¯ï¼Œè€Œå•å…ƒæµ‹è¯•çš„logéƒ½ç›´æ¥æ‰“å°åˆ°consoleé‡Œé¢ï¼Œä¹Ÿçœå»äº†å¾ˆå¤šç¼–è¯‘ï¼Œæ‰“åŒ…çš„æ—¶é—´ï¼Œåˆèƒ½æ»¡è¶³å„ä½çš„å¿ƒç†éœ€æ±‚ï¼ˆçŒ¥çè„¸ï¼‰ï¼Œä¸€ä¸¾ä¸¤å¾—å•Šã€‚\n\n",frontmatter:{title:"å‰ç«¯å•å…ƒæµ‹è¯•&MochaæŒ‡åŒ—",date:"2017-05-16",category:["å‰ç«¯"],path:"/post/unit-test"}}},{node:{excerpt:'\n> åŸæ–‡è¯‘è‡ª[Smashing Magazine](https://www.smashingmagazine.com/) -- [[How To Develop An Interactive Command Line Application Using Node.js](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)\n\nç›¸ä¿¡å¾ˆå¤šå‰ç«¯éƒ½å¬è¯´è¿‡æˆ–è€…ä½¿ç”¨è¿‡[Gulp](http://www.gulpjs.com.cn/), [Angular CLI](https://cli.angular.io/), [Cordova](https://cordova.apache.org/), [Yeoman](http://yeoman.io/)æˆ–å…¶ä»–ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ä½†æœ‰æƒ³è¿‡è¿™äº›ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„å—ï¼Ÿä¾‹å¦‚åœ¨Angular CLIä¸­ä½¿ç”¨`ng new <project-name>`åä¼šå»ºç«‹ä¸€ä¸ªå·²ç»æœ‰åŸºæœ¬é…ç½®çš„angularé¡¹ç›®ï¼›åˆæˆ–è€…åƒYeomanï¼Œä¹Ÿèƒ½è¿è¡Œæ—¶å€™è¾“å…¥æˆ–è€…é€‰æ‹©é…ç½®é¡¹ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰é¡¹ç›®é…ç½®ï¼Œå¿«é€Ÿæ­å»ºå¥½å¼€å‘æ—¶å€™éœ€è¦ç”¨åˆ°çš„å¼€å‘ç¯å¢ƒã€‚ä¸‹é¢çš„æ•™ç¨‹ï¼Œå°±æ˜¯è®²å¦‚ä½•ä½¿ç”¨nodeå†™ä¸€ä¸ªåƒè¿™æ ·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚\n\nåœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿè¾“å…¥ä¸€ä¸ªCSVæ–‡ä»¶åœ°å€ï¼Œä»è€Œè·å–åˆ°æ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæ¨¡æ‹Ÿç¾¤å‘é‚®ä»¶ï¼ˆåŸæ–‡æ˜¯ä½¿ç”¨[SendGrid Api](https://github.com/sendgrid/sendgrid-nodejs)æ¨¡æ‹Ÿå‘é€ï¼‰\næ–‡ç« ç›®å½•ï¼š\n1."Hello World"\n2.å¤„ç†å‘½ä»¤è¡Œå‚æ•°\n3.è¿è¡Œæ—¶è¾“å…¥å‚æ•°\n4.æ¨¡æ‹Ÿå‘é€é‚®ä»¶\n5.æ”¹å˜è¾“å‡ºå†…å®¹æ ·å¼\n6.å˜æˆshellå‘½ä»¤\n\n',frontmatter:{title:"ä½¿ç”¨nodejså†™ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åº",date:"2017-05-16",category:["å‰ç«¯"],path:"/post/node-command-app"}}},{node:{excerpt:"\nå¥½ä¹…ä¹‹å‰åšå¾—ä¸€ä¸ªtodo demoï¼Œä½¿ç”¨äº†æœ€è¿‘è¾ƒç«çš„reactå’Œwebpackï¼Œç”±äºå…¬å¸ç”µè„‘å„ç§ä¸èƒ½è£…ï¼Œæ‰€ä»¥æ²¡ç”¨ä¸Šes6ï¼ˆå„ç§é™åˆ¶å¤ªæƒ¨äº†ï¼‰ï¼Œåœ¨è¿™é¡ºä¾¿åšä¸ªè®°å½•ï¼Œå¹´çºªå¤§è®°æ€§å¤ªå·®äº†ã€‚\n\n### å°ç§‘æ™®\nä»€ä¹ˆæ˜¯React? æŒ‰å®˜æ–¹è§£é‡Šï¼Œæ¡†æ¶å±äºMVCä¸­çš„viewå±‚ï¼Œç”±äºå…¶è®¾è®¡æ€æƒ³ç‹¬ç‰¹ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œé€»è¾‘ç®€å•ï¼Œæ‰€ä»¥ä¸Šå¹´å¼€å§‹è¶Šæ¥è¶Šå¤šäººå…³æ³¨ã€‚\nè‡³äºWebpackï¼Œå„ä½å®˜äººä»åå­—åº”è¯¥å¯ä»¥çŒœå‡ºï¼Œæ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä½†åˆä¸æ­¢æ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼Œä¸¤ä¸ªå­—å°±å¯ä»¥å½¢å®¹å®ƒçš„ä¼˜ç‚¹äº†ï¼Œå°±æ˜¯æš´åŠ›ï¼Œç©¶ç«Ÿæœ‰å¤šæš´åŠ›ï¼Œä¸‹é¢demoå°±ä¸ºå„ä½å®˜äººæ­æ™“ï¼\n\n",frontmatter:{title:"React-todo demo",date:"2016-03-02",category:["js framework"],path:"/post/react-todo"}}}]}},pathContext:{edgesLen:14,tagsLen:12,categoryLen:5,nodes:[{node:{frontmatter:{title:"Promiseçš„ç®€å•å®ç°",date:"2017-05-17",category:["å‰ç«¯"],tags:["javascript"],path:"/post/js-promise"},excerpt:"\nè€å‰ç«¯éƒ½çŸ¥é“ï¼Œjsåˆ†ä¸ºåŒæ­¥(sync)å’Œå¼‚æ­¥(async)ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥ç®€å•æ¥è¯´å°±æ˜¯æ’é˜Ÿï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚å¼‚æ­¥åˆ™æ˜¯å‡½æ•°æ‰§è¡Œå®Œåæ‰§è¡Œå®ƒçš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸‹ä¸€ä¸ªå‡½æ•°ä¸ç­‰ä¸Šä¸€ä¸ªå‡½æ•°å®Œæˆå°±å¼€å§‹æ‰§è¡Œã€‚ä½¿ç”¨å›è°ƒå‡½æ•°èƒ½è§£å†³å¤§éƒ¨åˆ†çš„å¼‚æ­¥é—®é¢˜ï¼Œä½†æ˜¯å›è°ƒä¸€å¤šå°±å¾ˆå®¹æ˜“æ‰è¿›â€˜å›è°ƒåœ°ç‹±â€™ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ[promise](https://promisesaplus.com/)ï¼ˆCommonJSå·¥ä½œç»„æå‡ºçš„ä¸€ç§è§„èŒƒï¼‰ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºä¼˜é›…çš„è§£å†³æ–¹å¼ã€‚\n\nä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå°è¯•å®ç°ä¸€ä¸ªpromiseï¼Œé€šè¿‡å®ç°è¿™ä¸ªdemoï¼Œèƒ½æ›´å¥½åœ°ç†è§£promiseçš„è¿è¡Œæ–¹å¼ï¼Œä½¿å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™æ›´åŠ ç†Ÿç»ƒï¼Œä¹Ÿèƒ½ä»å®ç°åŸç†ä¸­è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œä»è€Œè¾¾åˆ°â€œçŸ¥å…¶ç„¶ä¸”çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚\n\n\n\n# åˆæ­¥æ„å»ºä¸€ä¸ªPromise\næˆ‘ä»¬çœ‹ä¸‹å¹³æ—¶ä½¿ç”¨promiseå¤„ç†å¼‚æ­¥å‡½æ•°æ—¶å€™çš„ä½¿ç”¨æ–¹å¼ï¼Œä»è°ƒç”¨æ–¹æ³•çœ‹ä¸‹å¤§æ¦‚ç”¨ä»€ä¹ˆæ–¹å¼å»å®ç°\n```javascript\n// ä¾‹1\nfunction getAsyncData() {\n\treturn new Promise(function(resolve, reject) {\n\t\tsetTimeout(function() {\n\t\t\tresolve('promise done!')\n\t\t}, 1000)\n\t})\n}\n\ngetAsyncData().then(function(result) {\n\tconsole.log(result);\n}).then(function() {\n\tconsole.log('done too!');\n})\n```\n\n",headings:[{depth:1,value:"åˆæ­¥æ„å»ºä¸€ä¸ªPromise"},{depth:1,value:"å¼•å…¥çŠ¶æ€"},{depth:1,value:"ä¸²è¡Œpromise"},{depth:1,value:"æ·»åŠ rejectåŠŸèƒ½"},{depth:1,value:"æ€»ç»“"},{depth:2,value:"å‚è€ƒ"}],html:"<p>è€å‰ç«¯éƒ½çŸ¥é“ï¼Œjsåˆ†ä¸ºåŒæ­¥(sync)å’Œå¼‚æ­¥(async)ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥ç®€å•æ¥è¯´å°±æ˜¯æ’é˜Ÿï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚å¼‚æ­¥åˆ™æ˜¯å‡½æ•°æ‰§è¡Œå®Œåæ‰§è¡Œå®ƒçš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸‹ä¸€ä¸ªå‡½æ•°ä¸ç­‰ä¸Šä¸€ä¸ªå‡½æ•°å®Œæˆå°±å¼€å§‹æ‰§è¡Œã€‚ä½¿ç”¨å›è°ƒå‡½æ•°èƒ½è§£å†³å¤§éƒ¨åˆ†çš„å¼‚æ­¥é—®é¢˜ï¼Œä½†æ˜¯å›è°ƒä¸€å¤šå°±å¾ˆå®¹æ˜“æ‰è¿›â€˜å›è°ƒåœ°ç‹±â€™ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<a href=\"https://promisesaplus.com/\">promise</a>ï¼ˆCommonJSå·¥ä½œç»„æå‡ºçš„ä¸€ç§è§„èŒƒï¼‰ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºä¼˜é›…çš„è§£å†³æ–¹å¼ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå°è¯•å®ç°ä¸€ä¸ªpromiseï¼Œé€šè¿‡å®ç°è¿™ä¸ªdemoï¼Œèƒ½æ›´å¥½åœ°ç†è§£promiseçš„è¿è¡Œæ–¹å¼ï¼Œä½¿å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™æ›´åŠ ç†Ÿç»ƒï¼Œä¹Ÿèƒ½ä»å®ç°åŸç†ä¸­è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œä»è€Œè¾¾åˆ°â€œçŸ¥å…¶ç„¶ä¸”çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚</p>\n<h1>åˆæ­¥æ„å»ºä¸€ä¸ªPromise</h1>\n<p>æˆ‘ä»¬çœ‹ä¸‹å¹³æ—¶ä½¿ç”¨promiseå¤„ç†å¼‚æ­¥å‡½æ•°æ—¶å€™çš„ä½¿ç”¨æ–¹å¼ï¼Œä»è°ƒç”¨æ–¹æ³•çœ‹ä¸‹å¤§æ¦‚ç”¨ä»€ä¹ˆæ–¹å¼å»å®ç°</p>\n<pre><code class=\"language-javascript\">// ä¾‹1\nfunction getAsyncData() {\n    return new Promise(function(resolve, reject) {\n        setTimeout(function() {\n            resolve('promise done!')\n        }, 1000)\n    })\n}\n\ngetAsyncData().then(function(result) {\n    console.log(result);\n}).then(function() {\n    console.log('done too!');\n})\n</code></pre>\n<!-- more -->\n<p><code>getAsyncData</code>å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œç„¶åé€šè¿‡<code>then</code>æ–¹æ³•æ‰§è¡Œå‡½æ•°çš„å›è°ƒï¼Œç„¶åå°è¯•å®ç°ä¸€ä¸‹è¿™ä¸ªåŸºæœ¬çš„åŠŸèƒ½</p>\n<pre><code class=\"language-javascript\">// promise.js\nvar Primose = function(fn) {\n    var callbacks = [];\n\n    this.done = function(onFulfilled) {\n        this.callbacks.push(onFulfilled)\n\n        // æ”¯æŒé“¾å¼è°ƒç”¨\n        return this;\n    }\n\n    function resolve(value) {\n        // pushåˆ°é˜Ÿåˆ—çš„æœ€åº•ç«¯ï¼Œä¿è¯é“¾å¼ä»£ç æ‰§è¡Œå®Œåå†æ‰§è¡Œæ–¹æ³•\n        setTimeout(function() {\n            while(callbacks[0]) {\n                callbacks.shift()()\n            }\n        }, 0)\n    }\n\n    fn(resolve)\n}\n</code></pre>\n<p>åˆ°è¿™é‡Œå°±å®Œæˆäº†promiseçš„åŸºç¡€åŠŸèƒ½ï¼Œç„¶åæ‰§è¡Œä¸€ä¸‹çœ‹ä¸‹æœ‰æ²¡æœ‰è¾¾åˆ°é¢„æœŸæƒ…å†µ:</p>\n<pre><code class=\"language-bash\">$node promise\npromise done!\ndone too!\n</code></pre>\n<p>ä¹çœ‹ä¸€ä¸‹ï¼Œæ€ä¹ˆæœ‰ç‚¹åƒlazyman(jsä¸­æ¯”è¾ƒæœ‰åçš„é¢˜ç›®ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ä¸€ä¸‹) ï¼Œçœ‹æ¥å¹³æ—¶å¤šè¯»ä¹¦è¿˜æ˜¯æœ‰å¥½å¤„çš„ï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰v</p>\n<h1>å¼•å…¥çŠ¶æ€</h1>\n<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸‹<a href=\"https://promisesaplus.com/#requirements\">promiseçŠ¶æ€è§„èŒƒ</a></p>\n<p>promiseå¿…éœ€åœ¨pending, fulfilledæˆ–è€…rejectä¸‰ä¸ªçŠ¶æ€ä¸­çš„ä¸€ä¸ª</p>\n<ul>\n<li>\n<p>å½“promiseåœ¨pendingçŠ¶æ€ä¸­</p>\n<ul>\n<li>å¯ä»¥å˜ä¸ºfulfilledæˆ–è€…rejectçŠ¶æ€</li>\n</ul>\n</li>\n<li>\n<p>å½“promiseåœ¨fulfilledä¸­</p>\n<ul>\n<li>ä¸èƒ½è¿‡æ¸¡ä¸ºå…¶ä»–çŠ¶æ€</li>\n<li>å¿…éœ€è¿”å›ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ä¸èƒ½æ”¹å˜</li>\n</ul>\n</li>\n<li>\n<p>å½“promiseåœ¨rejectä¸­</p>\n<ul>\n<li>ä¸èƒ½è¿‡æ¸¡ä¸ºå…¶ä»–çŠ¶æ€</li>\n<li>å¿…éœ€è¿”å›ä¸€ä¸ªå¤±è´¥åŸå› ï¼Œå¹¶ä¸”ä¸èƒ½æ”¹å˜</li>\n</ul>\n</li>\n</ul>\n<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ª<code>status</code>å˜é‡ä¿å­˜çŠ¶æ€ï¼Œå¹¶ä¸”éšç€ä»£ç æ‰§è¡Œæ›´æ–°çŠ¶æ€ã€‚</p>\n<pre><code class=\"language-javascript\">var Promise = function(fn) {\n    var state = 'pending',\n        value = null,\n        callbacks = [];\n\n    this.then = function(onFulfilled) {\n        if(state === 'pending') {\n            callbacks.push(onFulfilled);\n            return this;\n        }\n\n        onFulfilled(value);\n        return this;\n    }\n\n    function resolve(newValue) {\n        state = 'fulfilled';\n        value = newValue;\n\n        setTimeout(function() {\n            while(callbacks[0]) {\n                callbacks.shift()(value)\n            }\n        }, 0)\n    }\n\n    fn(resolve)\n}\n</code></pre>\n<h1>ä¸²è¡Œpromise</h1>\n<p>åœ¨æ‰§è¡Œpromiseçš„æ—¶å€™ï¼Œç»å¸¸ä¼šåœ¨<code>then</code>çš„æ–¹æ³•é‡Œé¢æ‰§è¡Œå¦å¤–ä¸€ä¸ªpromiseï¼Œ<em>ä¸²è”æ‰§è¡Œpromiseåº”è¯¥æ˜¯promiseé‡Œé¢æœ€æœ‰è¶£å¹¶ä¸”æ˜¯æœ€æ ¸å¿ƒçš„åŠŸèƒ½äº†</em>ã€‚</p>\n<p>ä¸²è¡ŒpromiseæŒ‡æ‰§è¡Œå®Œä¸€ä¸ªå¼‚æ­¥å‡½æ•°è¾¾åˆ°fulfilledçŠ¶æ€åï¼Œæ¥ç€æ‰§è¡Œä¸‹ä¸€ä¸ªpromiseï¼Œä¾‹å¦‚</p>\n<pre><code class=\"language-javascript\">// æ¥ç€ä¾‹1\n\ngetAsyncData()\n    .then(getAsyncData2)\n    .then(function(data) {\n        console.log(data + 'done too!');\n    })\n\nfunction getAsyncData2(result) {\n    return new Promise(function(resolve, reject) {\n        setTimeout(function() {\n            resolve(result + 'next promise done!')\n        }, 1000)\n    })\n}\n</code></pre>\n<p>è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬ï¼Œä¹‹å‰çš„<code>then</code>æ–¹æ³•æ˜¯ç›´æ¥æŠŠ<code>this</code>è¿”å›å‡ºå»ï¼Œæ‰€ä»¥å®ç°é“¾å¼è°ƒç”¨ï¼Œæ‰§è¡Œèµ·æ¥çš„æ—¶å€™ä¹Ÿæ‰›æ‰›çš„ï¼Œæ²¡æ¯›ç—…ï¼Œä½†å¦‚æœthenä¸­æ‰§è¡Œä¸‹ä¸€ä¸ªpromiseï¼Œè¿™æ—¶å€™æŒ‰ä¸Šé¢çš„ä»£ç ï¼Œåº”è¯¥æ˜¯ç›´æ¥å°±returnä¸€ä¸ªpromiseå‡ºå»çš„ï¼Œèµ°ä¸äº†ä¸‹ä¸€æ­¥ï¼Œæ‰€ä»¥<code>then</code>æ–¹æ³•åº”è¯¥éœ€è¦å¤„ç†ä¸€ä¸‹ï¼Œpromiseçš„æ‰§è¡Œæ–¹å¼åº”è¯¥è¦å˜ä¸ºï¼š</p>\n<ol>\n<li>æ‰§è¡Œä»£ç ï¼Œå°†æ‰€æœ‰æ–¹æ³•pushåˆ°<code>callbacks</code>æ•°ç»„é‡Œé¢</li>\n<li>å¦‚æœ<code>then</code>ä¸­æ˜¯ä¸€ä¸ªpromiseï¼ŒæŠŠå‰©ä¸‹çš„<code>callbacks</code>æäº¤åˆ°è¿™ä¸ªpromiseä¸­æ‰§è¡Œ</li>\n<li>å†å¾ªç¯ç¬¬ä¸€æ­¥</li>\n</ol>\n<pre><code class=\"language-javascript\">var Promise = function(fn) {\n    var state = 'pending',\n        // value = null,\n        callbacks = [];\n\n    this.then = function(onFulfilled) {\n        switch(state) {\n            case 'pending':\n                callbacks.push(onFulfilled)\n                return this;\n                break;\n            case 'fulfilled':\n                onFulfilled()\n                return this;\n                break;\n        }\n    }\n\n    function resolve(newValue) {\n        var value = newValue;\n        var temp = null;\n\n        setTimeout(function() {\n            state = 'fulfilled';\n            do {\n                temp = callbacks.shift()(value)\n                // é¡ºåºæ‰§è¡Œæ•°ç»„ï¼Œå¦‚æœæ˜¯resolveè¿”å›value\n                // å¦‚æœæ˜¯promiseåˆ™æŠŠåé¢çš„thenæ–¹æ³•æäº¤åˆ°ä¸‹ä¸ªpromiseä¸­æ‰§è¡Œ\n                if(temp instanceof Promise) {\n                    while(callbacks[0]) {\n                        temp.then(callbacks.shift())\n                    }\n                    return;\n                }else {\n                    value = temp;\n                }\n            }while(callbacks[0])\n        }, 0)\n    }\n    fn(resolve)\n}\n</code></pre>\n<h1>æ·»åŠ rejectåŠŸèƒ½</h1>\n<p>å› ä¸ºä¸ç¡®å®šthenæ–¹æ³•ä¸­æ˜¯å¦ä¼šæ·»åŠ rejectçš„å¤„ç†ï¼Œæ‰€ä»¥é€‰ç”¨äº†ä¸€ä¸ªæ¯”è¾ƒç¬¨çš„æ–¹æ³•ï¼ŒåŠ ä¸€ä¸ª<code>errDerrers</code>çš„æ•°ç»„ï¼Œæ¯æ¬¡æ‰§è¡Œä¸ç®¡æœ‰æ²¡æœ‰æ–¹æ³•<code>then</code>éƒ½<code>push</code>åˆ°æ•°ç»„é‡Œé¢ï¼Œ<code>resolve</code>ä¸€ä¸ªæ–¹æ³•å°±<code>shift</code>ä¸€ä¸ªï¼Œè·ŸæˆåŠŸçš„å›è°ƒä¸€æ ·ï¼Œå½“rejectçš„æ—¶å€™ï¼Œåˆ¤æ–­ä¸‹å½“å‰çš„æ–¹æ³•æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œå‡½æ•°ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™æ‰§è¡Œã€‚è‡³äºcatchçš„æ–¹æ³•æŒ‰è¿™ä¸ªæ€è·¯æš‚æ—¶æ²¡æƒ³åˆ°ï¼Œåé¢æƒ³åˆ°å†æ›´æ–°ã€‚ä¿®æ”¹çš„åœ°æ–¹éƒ½æœ‰æ·»åŠ æ³¨é‡Šã€‚</p>\n<pre><code class=\"language-javascript\">var Promise = function(fn) {\n    var state = 'pending',\n        // value = null,\n        error = null,\n        errDeffers = [],\n        callbacks = [];\n\n    this.then = function(onFulfilled, rejected) {\n        switch(state) {\n            case 'pending':\n                callbacks.push(onFulfilled);\n                // æ¯æ¬¡æ‰§è¡Œthenéƒ½pushä¸€æ¬¡\n                errDeffers.push(rejected);\n                return this;\n                break;\n            case 'fulfilled':\n                onFulfilled()\n                return this;\n                break;\n            // rejectçš„è¯ç›´æ¥æ‰§è¡Œ\n            case 'rejected':\n                rejected(error);\n                return this;\n                break;\n        }\n    }\n\n    this.catch = function(rejected) {\n        if(errDeffer === null) {\n            errDeffer = rejected;\n            return;\n        }\n    }\n\n    function resolve(newValue) {\n        var value = newValue;\n        var temp = null;\n\n        setTimeout(function() {\n            state = 'fulfilled';\n            do {\n                temp = callbacks.shift()(value);\n                errDeffers.shift();\n                // é¡ºåºæ‰§è¡Œæ•°ç»„ï¼Œå¦‚æœæ˜¯resolveè¿”å›value\n                // å¦‚æœæ˜¯promiseåˆ™æŠŠåé¢çš„thenæ–¹æ³•æäº¤åˆ°ä¸‹ä¸ªpromiseä¸­æ‰§è¡Œ\n                if(temp instanceof Promise) {\n\n                    while(callbacks[0]) {\n                        // æˆåŠŸçš„æ—¶å€™ä¹Ÿè¦æ›´æ–°ä¸€ä¸‹errDeffersæ•°ç»„\n                        temp.then(callbacks.shift(), errDeffers.shift())\n                    }\n\n                    return;\n                }else {\n                    value = temp;\n                }\n            }while(callbacks[0])\n        }, 0)\n    }\n\n    // rejectæ–¹æ³•\n    // åˆ¤æ–­rejectedæ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯çš„è¯æ‰§è¡Œï¼Œä¸æ˜¯çš„è¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯\n    // rejectä¹Ÿè¦æäº¤åˆ°æ ˆçš„æœ€åº•ç«¯æ‰§è¡Œ\n    function reject(err) {\n        setTimeout(function() {\n            state = 'rejected';\n            error = err;\n            var rejected = errDeffers.shift();\n\n            if(Object.prototype.toString.call(rejected) !== '[object Function]') {\n                throw new Error('Uncaught promise error!');\n                return;\n            }\n\n            rejected(error);\n        }, 0)\n    }\n\n    fn(resolve, reject)\n}\n</code></pre>\n<h1>æ€»ç»“</h1>\n<p>æ‰¾èµ„æ–™çš„æ—¶å€™çœ‹åˆ°<a href=\"http://tech.meituan.com/promise-insight.html\">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿåšå®¢çš„å®ç°æ–¹å¼</a>é‡‡ç”¨äº†å¦å¤–ä¸€ç§è§£å†³æ–¹å¼è§£å†³ä¸²è¡Œpromiseï¼Œåé¢æ¥ç€ç ”ç©¶ä¸‹ï¼Œæœ‰å…´è¶£ä¹Ÿå¯ä»¥è‡ªè¡Œçœ‹ä¸‹ã€‚\nå®ç°promiseåº”è¯¥æœ‰ä¸‹é¢å‡ ä¸ªè¦ç‚¹ï¼š</p>\n<ol>\n<li>å‡½æ•°çš„é¡ºåºæ‰§è¡Œ</li>\n<li>å¤„ç†å¥½çŠ¶æ€ï¼ˆè¿™éƒ¨åˆ†æ„Ÿè§‰æˆ‘çš„æ–¹æ³•è·ŸpromiseAçš„çŠ¶æ€è¦æ±‚æœ‰ç‚¹åå·®ï¼‰</li>\n<li>é“¾å¼è°ƒç”¨\nè¿™ä¸ªä¾‹å­åªæ˜¯æ ¹æ®promiseçš„æ‰§è¡Œæ–¹å¼å®ç°å¤§æ¦‚çš„åŠŸèƒ½ï¼Œåé¢æˆ–è®¸ä¼šæ ¹æ®promiseè§„èŒƒå»å®ç°ä¸€ä¸ªæ¯”è¾ƒè§„èŒƒçš„demoã€‚</li>\n</ol>\n<h2>å‚è€ƒ</h2>\n<ul>\n<li><a href=\"https://promisesaplus.com/#requirements\">Promises/A+</a></li>\n<li><a href=\"http://tech.meituan.com/promise-insight.html\">å‰–æ Promise ä¹‹åŸºç¡€ç¯‡</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html\">Javascriptå¼‚æ­¥ç¼–ç¨‹çš„4ç§æ–¹æ³•</a></li>\n</ul>",htmlExcerpt:"<p>è€å‰ç«¯éƒ½çŸ¥é“ï¼Œjsåˆ†ä¸ºåŒæ­¥(sync)å’Œå¼‚æ­¥(async)ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥ç®€å•æ¥è¯´å°±æ˜¯æ’é˜Ÿï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚å¼‚æ­¥åˆ™æ˜¯å‡½æ•°æ‰§è¡Œå®Œåæ‰§è¡Œå®ƒçš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸‹ä¸€ä¸ªå‡½æ•°ä¸ç­‰ä¸Šä¸€ä¸ªå‡½æ•°å®Œæˆå°±å¼€å§‹æ‰§è¡Œã€‚ä½¿ç”¨å›è°ƒå‡½æ•°èƒ½è§£å†³å¤§éƒ¨åˆ†çš„å¼‚æ­¥é—®é¢˜ï¼Œä½†æ˜¯å›è°ƒä¸€å¤šå°±å¾ˆå®¹æ˜“æ‰è¿›â€˜å›è°ƒåœ°ç‹±â€™ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<a href=\"https://promisesaplus.com/\">promise</a>ï¼ˆCommonJSå·¥ä½œç»„æå‡ºçš„ä¸€ç§è§„èŒƒï¼‰ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ›´ä¸ºä¼˜é›…çš„è§£å†³æ–¹å¼ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šå°è¯•å®ç°ä¸€ä¸ªpromiseï¼Œé€šè¿‡å®ç°è¿™ä¸ªdemoï¼Œèƒ½æ›´å¥½åœ°ç†è§£promiseçš„è¿è¡Œæ–¹å¼ï¼Œä½¿å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™æ›´åŠ ç†Ÿç»ƒï¼Œä¹Ÿèƒ½ä»å®ç°åŸç†ä¸­è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œä»è€Œè¾¾åˆ°â€œçŸ¥å…¶ç„¶ä¸”çŸ¥å…¶æ‰€ä»¥ç„¶â€ã€‚</p>\n<h1>åˆæ­¥æ„å»ºä¸€ä¸ªPromise</h1>\n<p>æˆ‘ä»¬çœ‹ä¸‹å¹³æ—¶ä½¿ç”¨promiseå¤„ç†å¼‚æ­¥å‡½æ•°æ—¶å€™çš„ä½¿ç”¨æ–¹å¼ï¼Œä»è°ƒç”¨æ–¹æ³•çœ‹ä¸‹å¤§æ¦‚ç”¨ä»€ä¹ˆæ–¹å¼å»å®ç°</p>\n<pre><code class=\"language-javascript\">// ä¾‹1\nfunction getAsyncData() {\n    return new Promise(function(resolve, reject) {\n        setTimeout(function() {\n            resolve('promise done!')\n        }, 1000)\n    })\n}\n\ngetAsyncData().then(function(result) {\n    console.log(result);\n}).then(function() {\n    console.log('done too!');\n})\n</code></pre>\n"}},{node:{frontmatter:{title:"å‰ç«¯å•å…ƒæµ‹è¯•&MochaæŒ‡åŒ—",date:"2017-05-16",category:["å‰ç«¯"],tags:null,path:"/post/unit-test"},excerpt:"\n# ä»€ä¹ˆæ˜¯å•å…ƒ-æµ‹è¯•?\n- å•å…ƒå°±æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¨¡å—åŒ–çš„ç¨‹åºï¼Œéƒ½åº”è¯¥æ˜¯æœ‰è®¸å¤šä¸ªå•å…ƒæ„æˆï¼Œå•å…ƒèƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶åä¸å…¶ä»–å•å…ƒè¿›è¡Œäº¤äº’ ï¼Œä»è€Œå®Œæˆæ•´ä¸ªç¨‹åºçš„åŠŸèƒ½ã€‚\n- è€Œæµ‹è¯•ï¼Œå°±æ˜¯æµ‹è¯•å•¦ã€‚\n\næ‰€ä»¥å•å…ƒæµ‹è¯•é€šä¿—ç‚¹è®²å°±æ˜¯å¯¹ç¨‹åºæ¯ä¸ªç‹¬ç«‹çš„å•å…ƒåˆ†åˆ«æµ‹è¯•ï¼Œä¿è¯æ„æˆç¨‹åºçš„æ¯ä¸ªæ¨¡å—çš„æ­£ç¡®æ€§ï¼Œä»è€Œä¿è¯æ•´ä¸ªç¨‹åºçš„æ­£ç¡®è¿è¡Œã€‚\n\n# ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ\nå•å…ƒæµ‹è¯•åœ¨å‰ç«¯è¿˜æ˜¯ä¸å¤ªæ™®åŠçš„ï¼Œå› ä¸ºåˆšå¼€å§‹å‰ç«¯ä¹Ÿæ˜¯åå‘â€˜UIâ€™é‚£ä¸€å—çš„ï¼Œä½†éšç€nodeçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šéâ€˜UIâ€™çš„å‰ç«¯ä»£ç ï¼Œä¸€ä¸ªå›¢é˜Ÿä¹Ÿè¶Šæ¥è¶Šå¤šäººå‚åŠ å¼€å‘ï¼Œå¦‚æœç³»ç»Ÿä¸€å¤æ‚ï¼Œåˆæˆ–è€…ä½ çš„æ¨¡å—æäº¤åˆ°npmä¸Šé¢çš„è¯ï¼Œä¸€å‡ºé”™åŸºæœ¬å°±GGäº†ã€‚\nåˆæˆ–è€…ä½ è¿™æ ·æƒ³ï¼Œæµ‹è¯•æ˜¯é€ƒä¸æ‰çš„ï¼Œè¦ä¹ˆåœ¨devä¸Šæµ‹è¯•ï¼Œè¦ä¹ˆåœ¨prodä¸Šæµ‹è¯•ï¼Œæ€ä¹ˆéƒ½å¾—æµ‹è¯•ï¼Œè€Œä¸”æ¯æ¬¡æäº¤éƒ½è¦æµ‹è¯•ï¼Œä¸ºä»€ä¹ˆä¸å†™è‡ªåŠ¨æµ‹è¯•å‘¢ã€‚æˆ‘ä¹Ÿç›¸ä¿¡å¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿæœ‰å†™å®Œè·‘è·‘çœ‹çš„ä¹ æƒ¯ï¼Œè€Œå•å…ƒæµ‹è¯•çš„logéƒ½ç›´æ¥æ‰“å°åˆ°consoleé‡Œé¢ï¼Œä¹Ÿçœå»äº†å¾ˆå¤šç¼–è¯‘ï¼Œæ‰“åŒ…çš„æ—¶é—´ï¼Œåˆèƒ½æ»¡è¶³å„ä½çš„å¿ƒç†éœ€æ±‚ï¼ˆçŒ¥çè„¸ï¼‰ï¼Œä¸€ä¸¾ä¸¤å¾—å•Šã€‚\n\n",headings:[{depth:1,value:"ä»€ä¹ˆæ˜¯å•å…ƒ-æµ‹è¯•?"},{depth:1,value:"ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ"},{depth:1,value:'å¹²äº†è¿™æ¯ "Mocha"'},{depth:2,value:"ä¸¾ä¸ªä¾‹å­"},{depth:1,value:"å°ç»“"}],html:"<h1>ä»€ä¹ˆæ˜¯å•å…ƒ-æµ‹è¯•?</h1>\n<ul>\n<li>å•å…ƒå°±æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¨¡å—åŒ–çš„ç¨‹åºï¼Œéƒ½åº”è¯¥æ˜¯æœ‰è®¸å¤šä¸ªå•å…ƒæ„æˆï¼Œå•å…ƒèƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶åä¸å…¶ä»–å•å…ƒè¿›è¡Œäº¤äº’ ï¼Œä»è€Œå®Œæˆæ•´ä¸ªç¨‹åºçš„åŠŸèƒ½ã€‚</li>\n<li>è€Œæµ‹è¯•ï¼Œå°±æ˜¯æµ‹è¯•å•¦ã€‚</li>\n</ul>\n<p>æ‰€ä»¥å•å…ƒæµ‹è¯•é€šä¿—ç‚¹è®²å°±æ˜¯å¯¹ç¨‹åºæ¯ä¸ªç‹¬ç«‹çš„å•å…ƒåˆ†åˆ«æµ‹è¯•ï¼Œä¿è¯æ„æˆç¨‹åºçš„æ¯ä¸ªæ¨¡å—çš„æ­£ç¡®æ€§ï¼Œä»è€Œä¿è¯æ•´ä¸ªç¨‹åºçš„æ­£ç¡®è¿è¡Œã€‚</p>\n<h1>ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ</h1>\n<p>å•å…ƒæµ‹è¯•åœ¨å‰ç«¯è¿˜æ˜¯ä¸å¤ªæ™®åŠçš„ï¼Œå› ä¸ºåˆšå¼€å§‹å‰ç«¯ä¹Ÿæ˜¯åå‘â€˜UIâ€™é‚£ä¸€å—çš„ï¼Œä½†éšç€nodeçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šéâ€˜UIâ€™çš„å‰ç«¯ä»£ç ï¼Œä¸€ä¸ªå›¢é˜Ÿä¹Ÿè¶Šæ¥è¶Šå¤šäººå‚åŠ å¼€å‘ï¼Œå¦‚æœç³»ç»Ÿä¸€å¤æ‚ï¼Œåˆæˆ–è€…ä½ çš„æ¨¡å—æäº¤åˆ°npmä¸Šé¢çš„è¯ï¼Œä¸€å‡ºé”™åŸºæœ¬å°±GGäº†ã€‚\nåˆæˆ–è€…ä½ è¿™æ ·æƒ³ï¼Œæµ‹è¯•æ˜¯é€ƒä¸æ‰çš„ï¼Œè¦ä¹ˆåœ¨devä¸Šæµ‹è¯•ï¼Œè¦ä¹ˆåœ¨prodä¸Šæµ‹è¯•ï¼Œæ€ä¹ˆéƒ½å¾—æµ‹è¯•ï¼Œè€Œä¸”æ¯æ¬¡æäº¤éƒ½è¦æµ‹è¯•ï¼Œä¸ºä»€ä¹ˆä¸å†™è‡ªåŠ¨æµ‹è¯•å‘¢ã€‚æˆ‘ä¹Ÿç›¸ä¿¡å¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿæœ‰å†™å®Œè·‘è·‘çœ‹çš„ä¹ æƒ¯ï¼Œè€Œå•å…ƒæµ‹è¯•çš„logéƒ½ç›´æ¥æ‰“å°åˆ°consoleé‡Œé¢ï¼Œä¹Ÿçœå»äº†å¾ˆå¤šç¼–è¯‘ï¼Œæ‰“åŒ…çš„æ—¶é—´ï¼Œåˆèƒ½æ»¡è¶³å„ä½çš„å¿ƒç†éœ€æ±‚ï¼ˆçŒ¥çè„¸ï¼‰ï¼Œä¸€ä¸¾ä¸¤å¾—å•Šã€‚</p>\n<!-- more -->\n<h1>å¹²äº†è¿™æ¯ \"Mocha\"</h1>\n<p>mochaæ˜¯ä¸€ä¸ªjsæµ‹è¯•æ¡†æ¶ï¼Œé™¤æ­¤å¤–ï¼Œç±»ä¼¼çš„æµ‹è¯•æ¡†æ¶è¿˜æœ‰Jasmineã€Karmaã€Tapeç­‰ï¼Œè‡³äºä¸ºä»€ä¹ˆè¦ä»‹ç»Mochaï¼Ÿå› ä¸ºæˆ‘åªæ‡‚è¿™ä¸€ä¸ªã€‚\nä¸Šä»£ç å‰è¿˜è¦æ™®åŠä¸€ä¸‹ä¸¤ä¸ªæ¦‚å¿µ</p>\n<ul>\n<li><a href=\"https://zh.wikipedia.org/wiki/%E8%A1%8C%E4%B8%BA%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91\">BDDï¼ˆBehavior Driven Developmentï¼‰</a>\nBDDæ„ä¸ºè¡Œä¸ºé©±åŠ¨å¼€å‘ï¼Œæ˜¯ä¸€ç§æ•æ·è½¯ä»¶å¼€å‘æŠ€æœ¯ï¼Œå…·ä½“å†…å®¹å¤§å®¶å¯ä»¥å‚è€ƒwikipediaçš„è§£é‡Šã€‚</li>\n<li><a href=\"https://zh.wikipedia.org/wiki/%E6%96%B7%E8%A8%80_(%E7%A8%8B%E5%BC%8F)\">Assertion æ–­è¨€</a>\næ–­è¨€ï¼Œå°±æ˜¯åˆ¤æ–­ä»£ç çš„æ‰§è¡Œç»“æœä¸é¢„æœŸæ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±æŠ›å‡ºé”™è¯¯ï¼Œè¯´å¾—ç®€å•ç‚¹å°±æ˜¯åˆ¤æ–­ç¨‹åºçš„çœŸå‡ã€‚</li>\n</ul>\n<h2>ä¸¾ä¸ªä¾‹å­</h2>\n<pre><code class=\"language-javascript\">// add.js\nfunction add(a, b) {\n    return a + b\n}\nmodule.exports = add\n</code></pre>\n<p>é€šå¸¸æµ‹è¯•è„šæœ¬è¦ä¸æµ‹è¯•æºç åŒåï¼Œæ¯”å¦‚add.jsçš„æµ‹è¯•è„šæœ¬å°±æ˜¯add.test.js</p>\n<pre><code class=\"language-javascript\">// add.test.js\nconst add = require('./add.js')\nconst expect = require('chai').expect\n\ndescribe('åŠ æ³•å‡½æ•°æµ‹è¯•', function() {\n    it('1 + 1 ç­‰äº 2', function() {\n        expect(add(1, 1)).to.be.equal(2)\n    })\n    it('è¿”å›å€¼æ˜¯Number', function() {\n        expect(add(1, 1)).to.be.a('number')\n    })\n})\n</code></pre>\n<p>ä¸Šé¢ä»£ç å—å°±æ˜¯æµ‹è¯•è„šæœ¬ï¼Œå¯ç‹¬ç«‹è¿è¡Œï¼Œæµ‹è¯•è„šæœ¬ä¸­åº”è¯¥åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ª<code>describe</code>å—ï¼Œæ¯ä¸ª<code>describe</code>å—åº”åŒ…æ‹¬å¤šä¸ª<code>it</code>å—ã€‚\n<code>describe</code>æ˜¯æµ‹è¯•å¥—ä»¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦ä¼ ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæµ‹è¯•å¥—ä»¶çš„åç§°<code>('åŠ æ³•å‡½æ•°æµ‹è¯•')</code>ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œå‡½æ•°ã€‚\n<code>it</code>å—æ˜¯æµ‹è¯•ç”¨ä¾‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•ï¼Œæ˜¯æµ‹è¯•çš„æœ€å°å•ä½ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•ç”¨ä¾‹çš„åç§°('1 + 1 ç­‰äº 2')ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œå‡½æ•°ã€‚</p>\n<p>ç„¶ååœ¨terminalä¸‹æ‰§è¡Œ<code>mocha add.test.js</code></p>\n<pre><code class=\"language-terminal\">$ mocha add.test.js\n\n   åŠ æ³•å‡½æ•°æµ‹è¯•\n     âˆš 1 + 1 ç­‰äº 2\n     âˆš è¿”å›å€¼æ˜¯Number\n   2 passing (12ms)\n</code></pre>\n<p>å¦‚æœæˆ‘ä»¬æ”¹å˜ä¸€ä¸‹<code>add.js</code></p>\n<pre><code class=\"language-javascript\">// add.js\nfunction add(a, b) {\n    return a * b\n}\nmodule.exports = add\n</code></pre>\n<p>ç„¶åå†æ‰§è¡Œä¸€ä¸‹<code>mocha add.test.js</code></p>\n<pre><code class=\"language-terminal\">$ mocha add.test.js\n\n   åŠ æ³•å‡½æ•°æµ‹è¯•\n     âˆš 1 + 1 ç­‰äº 2\n     1) è¿”å›å€¼æ˜¯Number\n   1 passing (8ms)\n   1 failing\n\n   1) åŠ æ³•å‡½æ•°æµ‹è¯• è¿”å›å€¼æ˜¯Number:\n       AssertionError: expected 2 to equal 3\n       + expected - actual\n\n       -2\n       +3\n\n       at Context.it(add.test.js:6:27)\n</code></pre>\n<p>è¿™é‡Œä¹Ÿå¯ä»¥å¾ˆæ˜æ˜¾çœ‹å‡ºå“ªä¸ªæµ‹è¯•ç”¨ä¾‹æŠ¥é”™ã€è¿˜æœ‰æŠ¥é”™çš„ä½ç½®ï¼Œè¿™æ ·åœ¨å¼€å‘çš„æ—¶å€™å¼€å‘äººå‘˜å°±èƒ½å¾ˆå®¹æ˜“å®šä½é”™è¯¯ã€‚</p>\n<h1>å°ç»“</h1>\n<p>ä»ä¸Šé¢ä¸€ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œåˆ©ç”¨mochaå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯å¾ˆç®€å•çš„ã€‚è™½ç„¶å‰æœŸå¼€å‘éœ€è¦èŠ±ä¸€ç‚¹æ—¶é—´å»å†™å•å…ƒæµ‹è¯•ï¼Œä½†æ˜¯åé¢æä¾›çš„ä¾¿åˆ©æ€§è¶³ä»¥å°†å…¶å¼¥è¡¥ã€‚</p>",htmlExcerpt:"<h1>ä»€ä¹ˆæ˜¯å•å…ƒ-æµ‹è¯•?</h1>\n<ul>\n<li>å•å…ƒå°±æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªç±»ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¨¡å—åŒ–çš„ç¨‹åºï¼Œéƒ½åº”è¯¥æ˜¯æœ‰è®¸å¤šä¸ªå•å…ƒæ„æˆï¼Œå•å…ƒèƒ½å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç„¶åä¸å…¶ä»–å•å…ƒè¿›è¡Œäº¤äº’ ï¼Œä»è€Œå®Œæˆæ•´ä¸ªç¨‹åºçš„åŠŸèƒ½ã€‚</li>\n<li>è€Œæµ‹è¯•ï¼Œå°±æ˜¯æµ‹è¯•å•¦ã€‚</li>\n</ul>\n<p>æ‰€ä»¥å•å…ƒæµ‹è¯•é€šä¿—ç‚¹è®²å°±æ˜¯å¯¹ç¨‹åºæ¯ä¸ªç‹¬ç«‹çš„å•å…ƒåˆ†åˆ«æµ‹è¯•ï¼Œä¿è¯æ„æˆç¨‹åºçš„æ¯ä¸ªæ¨¡å—çš„æ­£ç¡®æ€§ï¼Œä»è€Œä¿è¯æ•´ä¸ªç¨‹åºçš„æ­£ç¡®è¿è¡Œã€‚</p>\n<h1>ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ</h1>\n<p>å•å…ƒæµ‹è¯•åœ¨å‰ç«¯è¿˜æ˜¯ä¸å¤ªæ™®åŠçš„ï¼Œå› ä¸ºåˆšå¼€å§‹å‰ç«¯ä¹Ÿæ˜¯åå‘â€˜UIâ€™é‚£ä¸€å—çš„ï¼Œä½†éšç€nodeçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šéâ€˜UIâ€™çš„å‰ç«¯ä»£ç ï¼Œä¸€ä¸ªå›¢é˜Ÿä¹Ÿè¶Šæ¥è¶Šå¤šäººå‚åŠ å¼€å‘ï¼Œå¦‚æœç³»ç»Ÿä¸€å¤æ‚ï¼Œåˆæˆ–è€…ä½ çš„æ¨¡å—æäº¤åˆ°npmä¸Šé¢çš„è¯ï¼Œä¸€å‡ºé”™åŸºæœ¬å°±GGäº†ã€‚\nåˆæˆ–è€…ä½ è¿™æ ·æƒ³ï¼Œæµ‹è¯•æ˜¯é€ƒä¸æ‰çš„ï¼Œè¦ä¹ˆåœ¨devä¸Šæµ‹è¯•ï¼Œè¦ä¹ˆåœ¨prodä¸Šæµ‹è¯•ï¼Œæ€ä¹ˆéƒ½å¾—æµ‹è¯•ï¼Œè€Œä¸”æ¯æ¬¡æäº¤éƒ½è¦æµ‹è¯•ï¼Œä¸ºä»€ä¹ˆä¸å†™è‡ªåŠ¨æµ‹è¯•å‘¢ã€‚æˆ‘ä¹Ÿç›¸ä¿¡å¤§å¤šæ•°ç¨‹åºå‘˜ä¹Ÿæœ‰å†™å®Œè·‘è·‘çœ‹çš„ä¹ æƒ¯ï¼Œè€Œå•å…ƒæµ‹è¯•çš„logéƒ½ç›´æ¥æ‰“å°åˆ°consoleé‡Œé¢ï¼Œä¹Ÿçœå»äº†å¾ˆå¤šç¼–è¯‘ï¼Œæ‰“åŒ…çš„æ—¶é—´ï¼Œåˆèƒ½æ»¡è¶³å„ä½çš„å¿ƒç†éœ€æ±‚ï¼ˆçŒ¥çè„¸ï¼‰ï¼Œä¸€ä¸¾ä¸¤å¾—å•Šã€‚</p>\n"}},{node:{frontmatter:{title:"ä½¿ç”¨nodejså†™ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åº",date:"2017-05-16",category:["å‰ç«¯"],tags:["nodejs","bash"],path:"/post/node-command-app"},excerpt:'\n> åŸæ–‡è¯‘è‡ª[Smashing Magazine](https://www.smashingmagazine.com/) -- [[How To Develop An Interactive Command Line Application Using Node.js](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)\n\nç›¸ä¿¡å¾ˆå¤šå‰ç«¯éƒ½å¬è¯´è¿‡æˆ–è€…ä½¿ç”¨è¿‡[Gulp](http://www.gulpjs.com.cn/), [Angular CLI](https://cli.angular.io/), [Cordova](https://cordova.apache.org/), [Yeoman](http://yeoman.io/)æˆ–å…¶ä»–ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ä½†æœ‰æƒ³è¿‡è¿™äº›ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„å—ï¼Ÿä¾‹å¦‚åœ¨Angular CLIä¸­ä½¿ç”¨`ng new <project-name>`åä¼šå»ºç«‹ä¸€ä¸ªå·²ç»æœ‰åŸºæœ¬é…ç½®çš„angularé¡¹ç›®ï¼›åˆæˆ–è€…åƒYeomanï¼Œä¹Ÿèƒ½è¿è¡Œæ—¶å€™è¾“å…¥æˆ–è€…é€‰æ‹©é…ç½®é¡¹ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰é¡¹ç›®é…ç½®ï¼Œå¿«é€Ÿæ­å»ºå¥½å¼€å‘æ—¶å€™éœ€è¦ç”¨åˆ°çš„å¼€å‘ç¯å¢ƒã€‚ä¸‹é¢çš„æ•™ç¨‹ï¼Œå°±æ˜¯è®²å¦‚ä½•ä½¿ç”¨nodeå†™ä¸€ä¸ªåƒè¿™æ ·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚\n\nåœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿè¾“å…¥ä¸€ä¸ªCSVæ–‡ä»¶åœ°å€ï¼Œä»è€Œè·å–åˆ°æ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæ¨¡æ‹Ÿç¾¤å‘é‚®ä»¶ï¼ˆåŸæ–‡æ˜¯ä½¿ç”¨[SendGrid Api](https://github.com/sendgrid/sendgrid-nodejs)æ¨¡æ‹Ÿå‘é€ï¼‰\næ–‡ç« ç›®å½•ï¼š\n1."Hello World"\n2.å¤„ç†å‘½ä»¤è¡Œå‚æ•°\n3.è¿è¡Œæ—¶è¾“å…¥å‚æ•°\n4.æ¨¡æ‹Ÿå‘é€é‚®ä»¶\n5.æ”¹å˜è¾“å‡ºå†…å®¹æ ·å¼\n6.å˜æˆshellå‘½ä»¤\n\n',headings:[{depth:2,value:"â€œHello Worldâ€"},{depth:2,value:"å¤„ç†å‘½ä»¤è¡Œå‚æ•°"},{depth:2,value:"è¿è¡Œæ—¶è¾“å…¥å‚æ•°"},{depth:2,value:"æ¨¡æ‹Ÿå‘é€é‚®ä»¶"},{depth:2,value:"å˜æˆshellå‘½ä»¤"}],html:'<blockquote>\n<p>åŸæ–‡è¯‘è‡ª<a href="https://www.smashingmagazine.com/">Smashing Magazine</a> -- <a href="https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/">[How To Develop An Interactive Command Line Application Using Node.js](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)</a></p>\n</blockquote>\n<p>ç›¸ä¿¡å¾ˆå¤šå‰ç«¯éƒ½å¬è¯´è¿‡æˆ–è€…ä½¿ç”¨è¿‡<a href="http://www.gulpjs.com.cn/">Gulp</a>, <a href="https://cli.angular.io/">Angular CLI</a>, <a href="https://cordova.apache.org/">Cordova</a>, <a href="http://yeoman.io/">Yeoman</a>æˆ–å…¶ä»–ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ä½†æœ‰æƒ³è¿‡è¿™äº›ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„å—ï¼Ÿä¾‹å¦‚åœ¨Angular CLIä¸­ä½¿ç”¨<code>ng new &#x3C;project-name></code>åä¼šå»ºç«‹ä¸€ä¸ªå·²ç»æœ‰åŸºæœ¬é…ç½®çš„angularé¡¹ç›®ï¼›åˆæˆ–è€…åƒYeomanï¼Œä¹Ÿèƒ½è¿è¡Œæ—¶å€™è¾“å…¥æˆ–è€…é€‰æ‹©é…ç½®é¡¹ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰é¡¹ç›®é…ç½®ï¼Œå¿«é€Ÿæ­å»ºå¥½å¼€å‘æ—¶å€™éœ€è¦ç”¨åˆ°çš„å¼€å‘ç¯å¢ƒã€‚ä¸‹é¢çš„æ•™ç¨‹ï¼Œå°±æ˜¯è®²å¦‚ä½•ä½¿ç”¨nodeå†™ä¸€ä¸ªåƒè¿™æ ·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p>\n<p>åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿè¾“å…¥ä¸€ä¸ªCSVæ–‡ä»¶åœ°å€ï¼Œä»è€Œè·å–åˆ°æ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæ¨¡æ‹Ÿç¾¤å‘é‚®ä»¶ï¼ˆåŸæ–‡æ˜¯ä½¿ç”¨<a href="https://github.com/sendgrid/sendgrid-nodejs">SendGrid Api</a>æ¨¡æ‹Ÿå‘é€ï¼‰\næ–‡ç« ç›®å½•ï¼š\n1."Hello World"\n2.å¤„ç†å‘½ä»¤è¡Œå‚æ•°\n3.è¿è¡Œæ—¶è¾“å…¥å‚æ•°\n4.æ¨¡æ‹Ÿå‘é€é‚®ä»¶\n5.æ”¹å˜è¾“å‡ºå†…å®¹æ ·å¼\n6.å˜æˆshellå‘½ä»¤</p>\n<!-- more -->\n<hr>\n<h2>â€œHello Worldâ€</h2>\n<p>å¼€å§‹å‰ï¼Œé¦–å…ˆä½ å¾—æœ‰nodeï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·è‡ªè¡Œå®‰è£…ä¸‹ã€‚nodeä¸­è‡ªå¸¦npmï¼Œä½¿ç”¨<a href="https://www.npmjs.com/">npm</a>èƒ½å®‰è£…è®¸å¤šå¼€æºçš„nodeæ¨¡å—ã€‚é¦–å…ˆï¼Œä½¿ç”¨npmåˆ›å»ºä¸€ä¸ªnodeé¡¹ç›®</p>\n<pre><code class="language-shell">$ npm init\nname: broadcast\nversion: 0.0.1\ndescription: CLI utility to broadcast email\nentry point: broadcast.js\n</code></pre>\n<p>é™¤è¿™äº›å‚æ•°å¤–ï¼Œnpmè¿˜æä¾›äº†å…¶ä»–å¦‚Git repositoryç­‰å‚æ•°ï¼Œå¯æ ¹æ®è‡ªèº«éœ€æ±‚è®¾ç½®è¾“å…¥ã€‚æ‰§è¡Œå®Œ<code>npm init</code>åï¼Œä¼šå‘ç°åœ¨åŒç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œé¢åŒ…å«äº†ä¸Šé¢å‘½ä»¤è¾“å…¥çš„ä¿¡æ¯ã€‚é…ç½®å†…å®¹ä¿¡æ¯å¯ä»¥åœ¨<a href="https://docs.npmjs.com/files/package.json">package.jsonæ–‡æ¡£</a>ä¸­æ‰¾åˆ°ã€‚</p>\n<p>ç„¶åï¼Œè¿˜æ˜¯ä»æœ€ç®€å•çš„Hello Worldå…¥æ‰‹ã€‚é¦–å…ˆåœ¨åŒç›®å½•ä¸‹å»ºä¸€ä¸ª<code>broadcast.js</code>æ–‡ä»¶</p>\n<pre><code class="language-javascript">// broadcast.js\nconsole.log(\'Hello World!\')\n</code></pre>\n<p>ç„¶ååœ¨terminalä¸­æ‰§è¡Œ</p>\n<pre><code class="language-shell">$ node broadcast\nHello World!\n</code></pre>\n<p>well done, æ ¹æ®<a href="https://docs.npmjs.com/files/package.json">package.jsonæ–‡æ¡£</a>ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª<code>dependencies</code>å‚æ•°ï¼Œåœ¨è¿™å‚æ•°ä¸­ä½ å¯ä»¥æ‰¾åˆ°æ‰€æœ‰è¿™é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹æ¨¡å—å’Œå®ƒä»¬çš„ç‰ˆæœ¬å·ï¼Œä¸Šé¢ä¹Ÿæœ‰æåŠåˆ°ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æ¨¡å—å»å¼€å‘è¿™ä¸ªå·¥å…·ã€‚æœ€åå¼€å‘å®Œæˆï¼Œ<code>package.json</code>åº”è¯¥å¦‚ä¸‹</p>\n<pre><code class="language-json">{\n    "name": "broadcast",\n    "version": "0.0.1",\n    "description": "CLI utility to broadcast emails",\n    "main": "broadcast.js",\n    "license": "MIT",\n    "dependencies": {\n        "chalk": "^1.1.3",\n        "commander": "^2.9.0",\n        "csv": "^1.1.0",\n        "inquirer": "^2.0.0"\n    }\n}\n</code></pre>\n<p>è¿™å‡ ä¸ªæ¨¡å— <a href="https://github.com/chalk/chalk">Chalk</a>, <a href="https://github.com/tj/commander.js">Commander</a>, <a href="https://github.com/sboudrias/Inquirer.js">Inquirer</a>, <a href="http://www.adaltas.com/en/2012/08/21/node-csv-stable-version-0-1-0/">CSV</a>çš„å…·ä½“ç”¨å¤„è·Ÿå…¶ä»–å‚æ•°ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p>\n<h2>å¤„ç†å‘½ä»¤è¡Œå‚æ•°</h2>\n<p>nodeåŸç”Ÿä¹Ÿæœ‰è¯»å–å‘½ä»¤è¡Œçš„å‡½æ•°<a href="https://nodejs.org/docs/latest/api/process.html"><code>process.argv</code></a>ï¼Œä½†æ˜¯è§£æå‚æ•°æ˜¯ä¸ªç¹ççš„å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä½¿ç”¨<a href="https://github.com/tj/commander.js">Commander</a>å»æ›¿ä»£è¿™äº›å·¥ä½œã€‚Commandeçš„å¦å¤–ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä¸ç”¨é¢å¤–çš„å»å†™ä¸€ä¸ª<code>--help</code>å‡½æ•°ï¼Œåªè¦å®šä¹‰äº†å…¶ä»–å‚æ•°ï¼Œ<code>--help</code>å‡½æ•°å°±ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚é¦–å…ˆå®‰è£…ä¸€ä¸‹Commanderå’Œå…¶ä»–package</p>\n<pre><code class="language-shell">$ npm install commander chalk csv inquirer --save\n</code></pre>\n<p>ç„¶åä¿®æ”¹<code>broadcast.js</code></p>\n<pre><code class="language-javascript">// broadcast\nconst program = require(\'commander\')\n\nprogram\n    .version(\'0.0.1\')\n    .option(\'-l, --list [list]\', \'list of customers in CSV file\')\n    .parse(process.argv)\n\nconsole.log(program.list)\n</code></pre>\n<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå¤„ç†ä¸€ä¸ªå‚æ•°æ˜¯ååˆ†ç®€å•çš„ã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>--list</code>çš„å‚æ•°ï¼Œç°åœ¨æˆ‘ä»¬å°±èƒ½é€šè¿‡<code>--list</code>å‚æ•°è·å–åˆ°å‘½ä»¤è¡Œä¼ è¿‡æ¥çš„å€¼ã€‚åœ¨è¿™ç¨‹åºä¸­ï¼Œliståº”è¯¥æ˜¯æ¥æ”¶ä¸€ä¸ªcsvçš„åœ°å€å‚æ•°ï¼Œç„¶åæ‰“å°åœ¨consoleä¸­ã€‚</p>\n<pre><code class="language-shell">$ node broadcast --list ./test.csv\n./test.csv\n</code></pre>\n<p>ä»jsä¸­å¯ä»¥çœ‹åˆ°è¿˜æœ‰ä¸€ä¸ª<code>version</code>å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>--version</code>è¯»å–ç‰ˆæœ¬å·ã€‚</p>\n<pre><code class="language-shell">$ node broadcast --version\n0.0.1\n</code></pre>\n<p>åˆæˆ–è€…èƒ½ä½¿ç”¨<code>--help</code>è·å–appèƒ½æ¥æ”¶çš„å‚æ•°</p>\n<pre><code class="language-shell">$ node broadcast --help\n\n  Usage: broadcast [options]\n\n  Options:\n\n    -h, --help                 output usage information\n    -V, --version              output the version number\n    -l, --list &#x3C;list>          list of customers in CSV file\n</code></pre>\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ¥æ”¶åˆ°å‘½ä»¤è¡Œä¼ é€’è¿‡æ¥çš„å‚æ•°äº†ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šåˆ©ç”¨æ¥æ”¶åˆ°çš„CSVæ–‡ä»¶åœ°å€ï¼Œå¹¶ä½¿ç”¨<a href="http://www.adaltas.com/en/2012/08/21/node-csv-stable-version-0-1-0/">CSV</a>æ¨¡å—å¤„ç†CSVæ–‡ä»¶çš„å†…å®¹ã€‚\næˆ‘ä»¬ä¼šä½¿ç”¨ä¸‹é¢çš„æ¯”å“¦å•Šå“¥å†…å®¹ä½œä¸ºCSVæ–‡ä»¶çš„å†…å®¹ã€‚ä½¿ç”¨CSVæ¨¡å—ï¼Œä¼šè¯»å–å†…å®¹ï¼Œå¹¶æ˜¾ç¤ºå„åˆ—çš„å†…å®¹ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>First name</th>\n<th>Last name</th>\n<th>Email</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Dwight</td>\n<td>Schrute</td>\n<td>dwight.schrute@dundermifflin.com</td>\n</tr>\n<tr>\n<td>Jim</td>\n<td>Halpert</td>\n<td>jim.halpert@dundermifflin.com</td>\n</tr>\n<tr>\n<td>Pam</td>\n<td>Beesly</td>\n<td>pam.beesly@dundermifflin.com</td>\n</tr>\n<tr>\n<td>Ryan</td>\n<td>Howard</td>\n<td>ryan.howard@dundermifflin.com</td>\n</tr>\n<tr>\n<td>Stanley</td>\n<td>Hudson</td>\n<td>stanley.hudson@dundermifflin.com</td>\n</tr>\n</tbody>\n</table>\n<p>ç°åœ¨ï¼Œæ›´æ–°ä¸‹<code>broadcast.js</code>ï¼Œä½¿ç”¨CSVè¯»å–å†…å®¹å¹¶æ‰“å°åœ¨console</p>\n<pre><code class="language-javascript">// broadcast.js\nconst program = require(\'commander\')\nconst csv = require(\'csv\')\nconst fs = require(\'fs\')\n\nprogram\n    .version(\'0.0.1\')\n    .option(\'-l, --list [list]\', \'List of customers in CSV\')\n    .parse(process.argv)\n\nconst stream = fs.createReadStream(program.list)\nstream\n    .pipe(csv.parse({ delimiter : "," }))\n    .on(\'data\', function(data) {\n         const firstname = data[0]\n         const lastname = data[1]\n         const email = data[2]\n\n         console.log(firstname, lastname, email)\n    })\n</code></pre>\n<p>é™¤csvæ¨¡å—å¤–ï¼Œè¿˜ä½¿ç”¨äº†nodeçš„<a href="https://nodejs.org/dist/latest-v7.x/docs/api/fs.html">File System</a>æ¨¡å—è¯»å–æ–‡ä»¶å†…å®¹ï¼Œcsvçš„<code>parse</code>æ–¹æ³•æŠŠåˆ—æ•°æ®è§£æä¸ºæ•°ç»„ï¼Œç„¶ååœ¨terminalä¸­è¿è¡Œä¸€ä¸‹å‘½ä»¤</p>\n<pre><code class="language-shell">$ node broadcast.js --list ./test.csv\nDwight Schrute dwight.schrute@dundermifflin.com\nJim Halpert jim.halpert@dundermifflin.com\nPam Beesly pam.beesly@dundermifflin.com\nRyan Howard ryan.howard@dundermifflin.com\nStanley Hudson stanley.hudson@dundermifflin.com\n</code></pre>\n<h2>è¿è¡Œæ—¶è¾“å…¥å‚æ•°</h2>\n<p>ä¸Šé¢å·²ç»å®ç°äº†è·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä½†å¦‚æœæƒ³åœ¨è¿è¡Œæ—¶å€™æ¥æ”¶å‚æ•°å€¼çš„è¯æˆ‘ä»¬å°±éœ€è¦å¦å¤–ä¸€ä¸ªæ¨¡å—<a href="https://github.com/sboudrias/Inquirer.js">inquirer.js</a>ï¼Œé€šè¿‡è¿™ä¸ªæ¨¡å—ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å¤šç§å‚æ•°ç±»å‹ï¼Œå¦‚æ–‡æœ¬ï¼Œå¯†ç ï¼Œå•é€‰æˆ–è€…å¤šé€‰åˆ—è¡¨ç­‰ã€‚</p>\n<p>ä¸‹é¢çš„demoä¼šé€šè¿‡inquireræ¥æ”¶é‚®ä»¶å‘é€äººçš„åå­—ï¼Œemailè¿˜æœ‰é‚®ä»¶ä¸»é¢˜ã€‚</p>\n<pre><code class="language-javascript">// broadcast.js\n...\nconst inquirer = require(\'inquirer\')\nconst questions = [\n  {\n    type : "input",\n    name : "sender.email",\n    message : "Sender\'s email address - "\n  },\n  {\n    type : "input",\n    name : "sender.name",\n    message : "Sender\'s name - "\n  },\n  {\n    type : "input",\n    name : "subject",\n    message : "Subject - "\n  }\n]\n\nprogram\n  .version(\'0.0.1\')\n  .option(\'-l, --list [list]\', \'List of customers in CSV\')\n  .parse(process.argv)\n\n// å‚¨å­˜CSVæ•°æ®\nconst contactList = []\nconst stream = fs.createReadStream(program.list)\n    .pipe(csv.parse({ delimiter : "," }))\n\nstream\n  .on(\'error\', function (err) {\n    return console.error(err.message)\n  })\n  .on(\'data\', function (data) {\n    let name = data[0] + " " + data[1]\n    let email = data[2]\n    contactList.push({ name : name, email : email })\n  })\n  .on(\'end\', function () {\n    inquirer.prompt(questions).then(function (answers) {\n      console.log(answers)\n    })\n  })\n</code></pre>\n<p>Inquire.jsçš„<code>prompt</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„å‚æ•°ï¼Œæ•°ç»„é‡Œå¯ä»¥è‡ªå®šä¹‰è¿è¡Œæ—¶éœ€è¦æ¥å—çš„é—®é¢˜å‚æ•°ï¼Œåœ¨è¿™demoé‡Œé¢ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“å‘é€è€…çš„åå­—è¿˜è¦emailè¿˜æœ‰é‚®ä»¶ä¸»é¢˜ï¼Œæ‰€ä»¥å®šä¹‰äº†ä¸€ä¸ª<code>questions</code>çš„æ•°ç»„æ¥å‚¨å­˜é—®é¢˜ï¼Œä»å¯¹è±¡é‡Œé¢å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª<code>input</code>çš„å‚æ•°ï¼Œé™¤æ­¤å¤–è¿˜å¯ä»¥æ¥å—<code>password</code>ç­‰å…¶ä»–ç±»å‹ï¼Œå…·ä½“å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹<a href="https://github.com/SBoudrias/Inquirer.js/">inquirerçš„æ–‡æ¡£</a>ã€‚æ­¤å¤–ï¼Œå‚æ•°<code>name</code>ä¿å­˜inputçš„keyå€¼ã€‚<code>prompt</code>æ–¹æ³•ä¼šè¿”è¿˜ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œpromiseä¸­ä¼šè¿”å›ä¸€ä¸ª<code>answer</code>å˜é‡ï¼Œé‡Œé¢å¸¦æœ‰åˆšæ‰è¾“å…¥çš„å€¼ã€‚</p>\n<pre><code class="language-shell">$ node broadcast -l input/employees.csv\n? Sender\'s email address -  kitssang_demo@163.com\n? Sender\'s name -  kit\n? Subject - Hello World\n{ sender:\n   { email: \'  kitssang_demo@163.com\',\n     name: \'kit\' },\n  subject: \'Hello World\' }\n</code></pre>\n<h2>æ¨¡æ‹Ÿå‘é€é‚®ä»¶</h2>\n<p>ç”±äºåŸæ–‡ä½¿ç”¨çš„<code>sendgrid</code>æ²¡æœ‰è·‘é€šï¼Œæ‰€ä»¥åªç»„è£…äº†ä¸€ä¸‹æ•°æ®æ¨¡æ‹Ÿäº†å‘é€é‚®ä»¶ã€‚åŸæœ¬çš„ç¬¬äº”éƒ¨åˆ†ä¹Ÿåœ¨è¿™é‡Œä¸€èµ·ç”¨ä¸Šäº†ã€‚</p>\n<pre><code class="language-javascript">// broadcast.js\n...\nprogram\n    .version(\'0.0.1\')\n    .option(\'-l, --list [list]\', \'list of customers in CSV file\')\n    .parse(process.argv)\n\nconst sendEmail = function(to, from, subject) {\n    const sender = chalk.green(`${from.name}(${from.email})`)\n    const receiver = chalk.green(`${to.name}(${to.email})`)\n    const theme = chalk.blue(subject)\n\n    console.log(`${sender} send a mail to ${receiver} and the subject of the email is ${theme}`)\n}\n\n// å‚¨å­˜CSVæ•°æ®\nlet concatList = []\nconst stream = fs.createReadStream(program.list)\n  .pipe(csv.parse({\n    delimiter: \',\'\n  }))\n  .on(\'data\', function(data) {\n    const name = data[0] + \' \' + data[1]\n    const email = data[2]\n\n    concatList.push({\n      name: name,\n      email: email\n    })\n  })\n  .on(\'end\', function() {\n    inquirer.prompt(questions).then((ans) => {\n      for (let i = 0; i &#x3C; concatList.length; i++) {\n        sendEmail(concatList[i], ans.sender, ans.subject)\n      }\n    }).catch((err) => {\n      console.log(err)\n    })\n  })\n</code></pre>\n<p>ç”±äºæ²¡æœ‰å¼‚æ­¥è¯·æ±‚ï¼Œ<code>async</code>æ¨¡å—æ²¡æœ‰ç”¨ä¸Šï¼Œå¦å¤–ä½¿ç”¨äº†<code>chalk</code>æ¨¡å—æ”¹å˜äº†consoleæ‰“å°ç»“æœçš„é¢œè‰²ã€‚</p>\n<h2>å˜æˆshellå‘½ä»¤</h2>\n<p>è‡³æ­¤ï¼Œæ•´ä¸ªå·¥å…·å·²ç»åŸºæœ¬å®Œæˆï¼Œä½†æ˜¯å¦‚æœæƒ³åƒä¸€ä¸ªæ™®é€šçš„shellå‘½ä»¤(ä¸åŠ <code>$ node xx</code>)æ‰§è¡Œï¼Œè¿˜éœ€è¦åšä»¥ä¸‹æ“ä½œã€‚é¦–å…ˆï¼Œæ·»åŠ <a href="https://zh.wikipedia.org/wiki/Shebang">shebang</a>åœ¨jsçš„å¤´éƒ¨ï¼Œè®©shellçŸ¥é“å¦‚ä½•æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚</p>\n<pre><code class="language-javascript">#!/usr/bin/env node\n\n// broadcast.js\nconst program = require("commander")\nconst inquirer = require("inquirer")\n...\n</code></pre>\n<p>ç„¶åå†é…ç½®ä¸€ä¸‹<code>package.json</code>ä½¿ä»£ç å¯è¿è¡Œ</p>\n<pre><code class="language-json">â€¦\n  "description": "CLI utility to broadcast emails",\n  "main": "broadcast.js",\n  "bin" : {\n    "broadcast" : "./broadcast.js"\n  }\nâ€¦\n</code></pre>\n<p>ä»ä»£ç å¯ä»¥çœ‹åˆ°åŠ äº†ä¸€ä¸ª<a href="https://docs.npmjs.com/files/package.json#bin"><code>bin</code></a>çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ä½¿broadcastå‘½ä»¤ä¸broadcast.jså»ºç«‹è¿æ¥ã€‚</p>\n<p>æœ€åä¸€æ­¥ï¼Œåœ¨å…¨å±€å®‰è£…ä¸€ä¸‹ä¾èµ–åŒ…ã€‚åœ¨é¡¹ç›®ç›®å½•è¿è¡Œä¸€ä¸‹ä¸‹é¢çš„å‘½ä»¤ã€‚</p>\n<pre><code class="language-shell">$ npm install -g\n</code></pre>\n<p>ç„¶åæµ‹è¯•ä¸€ä¸‹å‘½ä»¤</p>\n<pre><code class="language-shell">$ broadcast --help\n</code></pre>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¼€å‘æ—¶å€™å¦‚æœä½¿ç”¨<code>commaner</code>é»˜è®¤ç»™å‡ºçš„å‘½ä»¤æ‰§è¡Œ<code>broadcast</code>åˆ™åœ¨ä»£ç ä¸­æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½æ˜¯çœ‹ä¸è§çš„ã€‚å‡å¦‚è¾“å…¥<code>which broadcast</code>ï¼Œä½ ä¼šå‘ç°åœ°å€ä¸æ˜¯ä½ å½“å‰ç›®å½•ï¼Œæ‰€ä»¥è¿™æ—¶åº”è¯¥è¦ç”¨<code>npm link</code>å»æŸ¥çœ‹å‘½ä»¤çš„ç›®å½•æ˜ å°„ã€‚</p>',
htmlExcerpt:'<blockquote>\n<p>åŸæ–‡è¯‘è‡ª<a href="https://www.smashingmagazine.com/">Smashing Magazine</a> -- <a href="https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/">[How To Develop An Interactive Command Line Application Using Node.js](https://www.smashingmagazine.com/2017/03/interactive-command-line-application-node-js/)</a></p>\n</blockquote>\n<p>ç›¸ä¿¡å¾ˆå¤šå‰ç«¯éƒ½å¬è¯´è¿‡æˆ–è€…ä½¿ç”¨è¿‡<a href="http://www.gulpjs.com.cn/">Gulp</a>, <a href="https://cli.angular.io/">Angular CLI</a>, <a href="https://cordova.apache.org/">Cordova</a>, <a href="http://yeoman.io/">Yeoman</a>æˆ–å…¶ä»–ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ä½†æœ‰æƒ³è¿‡è¿™äº›ç¨‹åºæ˜¯æ€ä¹ˆå®ç°çš„å—ï¼Ÿä¾‹å¦‚åœ¨Angular CLIä¸­ä½¿ç”¨<code>ng new &#x3C;project-name></code>åä¼šå»ºç«‹ä¸€ä¸ªå·²ç»æœ‰åŸºæœ¬é…ç½®çš„angularé¡¹ç›®ï¼›åˆæˆ–è€…åƒYeomanï¼Œä¹Ÿèƒ½è¿è¡Œæ—¶å€™è¾“å…¥æˆ–è€…é€‰æ‹©é…ç½®é¡¹ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰é¡¹ç›®é…ç½®ï¼Œå¿«é€Ÿæ­å»ºå¥½å¼€å‘æ—¶å€™éœ€è¦ç”¨åˆ°çš„å¼€å‘ç¯å¢ƒã€‚ä¸‹é¢çš„æ•™ç¨‹ï¼Œå°±æ˜¯è®²å¦‚ä½•ä½¿ç”¨nodeå†™ä¸€ä¸ªåƒè¿™æ ·çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p>\n<p>åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿè¾“å…¥ä¸€ä¸ªCSVæ–‡ä»¶åœ°å€ï¼Œä»è€Œè·å–åˆ°æ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæ¨¡æ‹Ÿç¾¤å‘é‚®ä»¶ï¼ˆåŸæ–‡æ˜¯ä½¿ç”¨<a href="https://github.com/sendgrid/sendgrid-nodejs">SendGrid Api</a>æ¨¡æ‹Ÿå‘é€ï¼‰\næ–‡ç« ç›®å½•ï¼š\n1."Hello World"\n2.å¤„ç†å‘½ä»¤è¡Œå‚æ•°\n3.è¿è¡Œæ—¶è¾“å…¥å‚æ•°\n4.æ¨¡æ‹Ÿå‘é€é‚®ä»¶\n5.æ”¹å˜è¾“å‡ºå†…å®¹æ ·å¼\n6.å˜æˆshellå‘½ä»¤</p>\n'}},{node:{frontmatter:{title:"React-todo demo",date:"2016-03-02",category:["js framework"],tags:["React","Webpack","jsæ¡†æ¶"],path:"/post/react-todo"},excerpt:"\nå¥½ä¹…ä¹‹å‰åšå¾—ä¸€ä¸ªtodo demoï¼Œä½¿ç”¨äº†æœ€è¿‘è¾ƒç«çš„reactå’Œwebpackï¼Œç”±äºå…¬å¸ç”µè„‘å„ç§ä¸èƒ½è£…ï¼Œæ‰€ä»¥æ²¡ç”¨ä¸Šes6ï¼ˆå„ç§é™åˆ¶å¤ªæƒ¨äº†ï¼‰ï¼Œåœ¨è¿™é¡ºä¾¿åšä¸ªè®°å½•ï¼Œå¹´çºªå¤§è®°æ€§å¤ªå·®äº†ã€‚\n\n### å°ç§‘æ™®\nä»€ä¹ˆæ˜¯React? æŒ‰å®˜æ–¹è§£é‡Šï¼Œæ¡†æ¶å±äºMVCä¸­çš„viewå±‚ï¼Œç”±äºå…¶è®¾è®¡æ€æƒ³ç‹¬ç‰¹ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œé€»è¾‘ç®€å•ï¼Œæ‰€ä»¥ä¸Šå¹´å¼€å§‹è¶Šæ¥è¶Šå¤šäººå…³æ³¨ã€‚\nè‡³äºWebpackï¼Œå„ä½å®˜äººä»åå­—åº”è¯¥å¯ä»¥çŒœå‡ºï¼Œæ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä½†åˆä¸æ­¢æ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼Œä¸¤ä¸ªå­—å°±å¯ä»¥å½¢å®¹å®ƒçš„ä¼˜ç‚¹äº†ï¼Œå°±æ˜¯æš´åŠ›ï¼Œç©¶ç«Ÿæœ‰å¤šæš´åŠ›ï¼Œä¸‹é¢demoå°±ä¸ºå„ä½å®˜äººæ­æ™“ï¼\n\n",headings:[{depth:3,value:"å°ç§‘æ™®"},{depth:3,value:"DemoåŠŸèƒ½éœ€æ±‚"},{depth:3,value:"å¼€å§‹"},{depth:4,value:"é…ç½®webpack"},{depth:4,value:"ä¸Šä»£ç "},{depth:4,value:"Appç”Ÿå‘½ - state"},{depth:4,value:"å…¶ä»–ç»„ä»¶"},{depth:3,value:"æ€»ç»“"}],html:'<p>å¥½ä¹…ä¹‹å‰åšå¾—ä¸€ä¸ªtodo demoï¼Œä½¿ç”¨äº†æœ€è¿‘è¾ƒç«çš„reactå’Œwebpackï¼Œç”±äºå…¬å¸ç”µè„‘å„ç§ä¸èƒ½è£…ï¼Œæ‰€ä»¥æ²¡ç”¨ä¸Šes6ï¼ˆå„ç§é™åˆ¶å¤ªæƒ¨äº†ï¼‰ï¼Œåœ¨è¿™é¡ºä¾¿åšä¸ªè®°å½•ï¼Œå¹´çºªå¤§è®°æ€§å¤ªå·®äº†ã€‚</p>\n<h3>å°ç§‘æ™®</h3>\n<p>ä»€ä¹ˆæ˜¯React? æŒ‰å®˜æ–¹è§£é‡Šï¼Œæ¡†æ¶å±äºMVCä¸­çš„viewå±‚ï¼Œç”±äºå…¶è®¾è®¡æ€æƒ³ç‹¬ç‰¹ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œé€»è¾‘ç®€å•ï¼Œæ‰€ä»¥ä¸Šå¹´å¼€å§‹è¶Šæ¥è¶Šå¤šäººå…³æ³¨ã€‚\nè‡³äºWebpackï¼Œå„ä½å®˜äººä»åå­—åº”è¯¥å¯ä»¥çŒœå‡ºï¼Œæ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä½†åˆä¸æ­¢æ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼Œä¸¤ä¸ªå­—å°±å¯ä»¥å½¢å®¹å®ƒçš„ä¼˜ç‚¹äº†ï¼Œå°±æ˜¯æš´åŠ›ï¼Œç©¶ç«Ÿæœ‰å¤šæš´åŠ›ï¼Œä¸‹é¢demoå°±ä¸ºå„ä½å®˜äººæ­æ™“ï¼</p>\n<!-- more -->\n<h3>DemoåŠŸèƒ½éœ€æ±‚</h3>\n<ul>\n<li>inputè¾“å…¥å†…å®¹ï¼Œå›è½¦é”®æˆ–æŒ‰é’®å¢åŠ ä¸€æ¡todo</li>\n<li>checkboxæ·»åŠ å®ŒæˆçŠ¶æ€</li>\n<li>ç§»åŠ¨åˆ°åˆ—è¡¨æ—¶æ˜¾ç¤ºåˆ é™¤</li>\n<li>æ˜¾ç¤ºtodoæ€»æ•°å’Œå·²ç»å®Œæˆæ•°</li>\n<li>listå…¨é€‰</li>\n<li>æ¸…é™¤å·²å®Œæˆ</li>\n<li>æ·»åŠ åŠ¨ç”»æ•ˆæœ</li>\n</ul>\n<h3>å¼€å§‹</h3>\n<p>å¼€å§‹éœ€è¦npmå®‰è£…ä¸€ä¸‹ç­‰ä¸‹è¦ç”¨çš„packagesï¼Œå¦‚æœæ˜¯checkoutæˆ‘çš„demoï¼Œå°±åŠ¨åŠ¨æ‰‹æŒ‡å¤´ï¼Œinstallä¸€ä¸‹ï¼Œæˆ‘çš„demoåœ°å€æ˜¯<a href="https://github.com/kitwon/react-todo">https://github.com/kitwon/react-todo</a></p>\n<pre><code class="language-bash">$npm install\n</code></pre>\n<h4>é…ç½®webpack</h4>\n<p>æ‰€æœ‰ä¸œè¥¿å®‰è£…å®Œæˆä¹‹åé¦–å…ˆå°±æ˜¯é…ç½®<a href="http://webpack.github.io/docs/">webpack</a></p>\n<pre><code class="language-javascript">var path = require(\'path\');\n\nmodule.exports = {\n    entry : "./src/entry.js",\n    output : {\n        path : path.join(__dirname, "out"),\n        publicPath : "./out/",\n        filename : "bundle.js"\n    },\n    externals : {\n        react : "React"\n    },\n    module : {\n        loaders : [\n            { test : /\\.js$/, loader : "jsx",include: /src/ },\n            { test : /\\.css$/, loader : "style!css" },\n            { test : /\\.less$/, loader : "style!css!less" },\n            { test : /\\.(jpg|png)$/, loader : "url?limit=8192" }\n        ]\n    }\n}\n</code></pre>\n<p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œwebpackçš„å…¥å£æ–‡ä»¶æ˜¯entry.jsï¼Œæ‰“åŒ…è¾“å‡ºçš„æ–‡ä»¶æ˜¯bundle.jsï¼Œexternalå±æ€§æ˜¯å‘Šè¯‰webpackï¼Œå½“APIå·²ç»å­˜åœ¨çš„æ—¶å€™ï¼Œä½¿ç”¨å…¨å±€å˜é‡ï¼Œå¹¶ä¸ä½œä»»ä½•æ“ä½œã€‚</p>\n<p>loaderçš„è¯æ²¡å•¥ï¼Œçœ‹æ–‡æ¡£å°±çŸ¥é“ï¼Œå„ç§ç¼–è¯‘æ‰“åŒ…ã€‚å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p>\n<h4>ä¸Šä»£ç </h4>\n<pre><code class="language-javascript">var React = require(\'React\'),\n    ReactDOM = require(\'react-dom\');\n\nrequire(\'../less/app.less\');\n\nvar AppFooter = require(\'./AppFooter\'),\n    AppHeader = require(\'./AppHeader\'),\n    ItemMain = require(\'./ItemMain\');\n\n\nvar App = React.createClass ({\n    getInitialState : function() {\n        return {\n            todoItem : [],\n            isAllChecked : false\n        }\n    },\n    //æ·»åŠ todo\n    addItem : function(item) {\n        var todoList = this.state.todoItem.push(item);\n        this.setState({isAllChecked : false});\n        this.forceUpdate();\n    },\n     //æ›´æ”¹todoçŠ¶æ€\n    changeTodoState : function(index, isDone, isAllChange) {\n        // isAllChange = false;\n        if(isAllChange) {\n            this.setState({\n                todoItem: this.state.todoItem.map(function(todo) {\n                    todo.isDone = isDone;\n                    return todo;\n                }),\n                isAllChecked : isDone\n            })\n        }else {\n            this.state.todoItem[index].isDone = isDone;\n            this.allChecked();\n            this.forceUpdate();\n        }\n    },\n    //åˆ é™¤todo\n    deleteTodo : function(index) {\n        var newTodo = this.state.todoItem.splice(index, 1);\n        this.setState({todoList: newTodo});\n    },\n    //æ¸…æ¥šå·²å®Œæˆ\n    clearDone : function() {\n        var doneList = this.state.todoItem.filter(function(item) {\n            return item.isDone === false;\n        })\n        this.setState({todoItem: doneList, isAllChecked: false});\n    },\n    //å…¨éƒ¨å®Œæˆ\n    allChecked : function() {\n        var allCheck = this.state.todoItem.every(function(item) {\n            return item.isDone === true;\n        })\n        if (allCheck) {\n            this.setState({isAllChecked : true})\n        };\n    },\n        render : function(){\n            var props = {\n                todoLength : this.state.todoItem.length || 0,\n                doneLength : this.state.todoItem.filter(function(item) {\n                    return item.isDone === true;\n                }).length || 0\n            };\n                return (\n                    &#x3C;div className="panel">\n                        &#x3C;header  className="mainHeader">&#x3C;h2>Webpack + React TODO Demo&#x3C;/h2>&#x3C;/header>\n                        &#x3C;AppHeader addItem={this.addItem}/>\n                        &#x3C;ItemMain itemList={this.state.todoItem} changeTodoState={this.changeTodoState} deleteTodo={this.deleteTodo} />\n                            &#x3C;AppFooter {...props} isAllChecked={this.state.isAllChecked} clearDone={this.clearDone} changeAllState={this.changeTodoState} />\n                    &#x3C;/div>\n                )\n        }\n})\n\nReactDOM.render(&#x3C;App/>, document.getElementById("app"));  //æ¸²æŸ“\n</code></pre>\n<p>ä»ä»£ç ä¸Šé¢å¯ä»¥çœ‹åˆ°å„ç§requireï¼Œæ²¡åŠ è½½commonjsã€seajsæˆ–å…¶ä»–æ¨¡å—åŒ–å·¥å…·ï¼Œä¸ºä»€ä¹ˆèƒ½ç›´æ¥requireå‘¢ï¼Œè€Œä¸”è¿˜æœ‰require lessï¼Œæ²¡é”™ï¼Œwebpackå°±æ˜¯é‚£ä¹ˆæš´åŠ›ï¼jsåé¢éƒ½ä¼šæ‰“åŒ…å¥½ä¸€ä¸ªæ–‡ä»¶ï¼Œæ ·å¼éƒ½ä¼šåŠ è½½åˆ°htmlé‡Œé¢ï¼Œåšspaæ—¶å€™ï¼Œå’Œreactç®€ç›´ç»é…ã€‚</p>\n<h4>Appç”Ÿå‘½ - state</h4>\n<p>Reactä¸»æµæ€æƒ³å°±æ˜¯çˆ¶ç»„ä»¶æ§åˆ¶stateï¼Œç„¶åé€šè¿‡propsä¼ é€’ç»™å­ç»„å»ºï¼Œæ‰€ä»¥ç®€å•æ¥è¯´ç•Œé¢å°±åƒçŠ¶æ€æœºï¼Œåªè¦æ›´æ–°stateï¼Œç„¶åæ ¹æ®æ–°çš„stateé‡æ–°æ¸²æŸ“ç•Œé¢ï¼Œä¸éœ€è¦æ“ä½œdomï¼Œæ‰€ä»¥reacté«˜æ€§èƒ½åŸå› ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªã€‚\nä»æœ€ä¸Šä»£ç å°±å¯ä»¥çœ‹å‡ºçˆ¶ç»„ä»¶ä¸­çš„å®šä¹‰çš„æ–¹æ³•åŸºæœ¬æ˜¯æ•´ä¸ªtodoçš„åŠŸèƒ½äº†ï¼Œç„¶årenderæ–¹æ³•å³æ¸²æŸ“htmlå’Œç»„ä»¶ã€‚</p>\n<pre><code class="language-javascript">&#x3C;ItemMain itemList={this.state.todoItem} changeTodoState={this.changeTodoState} deleteTodo={this.deleteTodo} />\n</code></pre>\n<p>ç„¶åå–ä¸€å°æ®µæ¸²æŸ“ç»„ä»¶ä»£ç ï¼ˆä¸Šé¢ä»£ç ï¼‰å°±å¯å‘ç°ï¼Œçˆ¶ç»„ä»¶å‘ItemMainè¿™ä¸ªç»„ä»¶ä¼ äº†4ä¸ªå±æ€§ï¼Œå…¶ä¸­itemListä¸ºstateï¼Œåªè¦todoItemä¸€æ›´æ–°ï¼Œreactå°±ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ï¼Œå…¶ä»–ä¸‰ä¸ªä¸ºæ–¹æ³•ï¼Œæ–¹æ³•æ›´æ–°ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>\n<pre><code class="language-javascript">// ItemMain.js\nvar React = require(\'React\');\nvar Items = require(\'./Items\');\n\nvar ItemMain = React.createClass({\n    render : function() {\n        var _this = this;\n        return (\n            &#x3C;section>\n                &#x3C;ul className="itemList">\n                    {_this.props.itemList.map(function (todo, index) {\n                        return (\n                            &#x3C;Items {...todo} key={index} index={index} {..._this.props} />\n                        )\n                    &#x3C;!-- })} -->\n                    &#x3C;!--è¿™é‡Œä¸æ³¨é‡Šä»£ç ä¸é«˜äº®ï¼Œæ¯”è¾ƒå¥‡è‘©ï¼Œå„ä½å®˜äººå°†å°±ç€çœ‹-->\n                &#x3C;/ul>\n            &#x3C;/section>\n        )\n    }\n})\n\nmodule.exports = ItemMain;\n</code></pre>\n<p>çœ‹è¿™é‡Œä¼°è®¡æœ‰ç‚¹è’™ï¼Œæˆ‘è‡ªå·±çœ‹çš„æ—¶å€™ä¹Ÿæœ‰ç‚¹è’™ï¼Œå› ä¸ºå¤ªä¹…çš„ä»£ç äº†å“ˆå“ˆå“ˆã€‚\nè¿™ä¸ªjsåªæœ‰ä¸€ä¸ªå¾ªç¯Itemçš„é€»è¾‘ï¼Œé¦–å…ˆçœ‹çœ‹<code>{...todo}</code>è¿™ä¸ªpropï¼Œè¿™ä¸ªæ˜¯æŠŠitemList[i]ä¸­çš„<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">æ•°ç»„å¯¹è±¡è§£æ„</a>ï¼Œç„¶åä¼ åˆ°itemé‡Œé¢ï¼Œå¦‚æœæ²¡æœ‰...è¿™ä¸ªå­—ç¬¦ï¼Œåˆ™éœ€è¦</p>\n<pre><code class="language-javascript">    &#x3C;Items text={props.text} isDone={props.isDone} key={index} index={index} changeTodoState={proprs.changeTodoState} deleteTodo={props.deleteTodo} />\n</code></pre>\n<p>å…·ä½“æ•°æ®å¤§å®¶å¯ä»¥åœ¨ä»£ç é‡Œé¢consoleæ‰“å°ä¸€ä¸‹ï¼Œè¿™æ ·å°è±¡ä¼šæ›´æ·±ã€‚</p>\n<pre><code class="language-javascript">// item.js\nvar React = require(\'React\');\n\nvar Items = React.createClass({\n    handleChange : function() {\n        var isDone = !this.props.isDone;\n        this.props.changeTodoState(this.props.index, isDone);\n    },\n    handleDeleteTodo : function() {\n        this.props.deleteTodo(this.props.index);\n    },\n    render : function() {\n        var doneStyle = this.props.isDone ? {textDecoration: \'line-through\'} : {textDecoration : \'none\'};\n        return (\n            &#x3C;li key={this.props.key} onMouseOver={this.handlerMouseOver} onMouseOut={this.handlerMouseOut}>\n                &#x3C;input type="checkbox" checked={this.props.isDone} onChange={this.handleChange} />\n                &#x3C;span style={doneStyle}>{this.props.text}&#x3C;/span>\n                &#x3C;button className="btn btn-default delete-item" onClick={this.handleDeleteTodo}>delete&#x3C;/button>\n            &#x3C;/li>\n        )\n    }\n})\n\nmodule.exports = Items;\n</code></pre>\n<p>è¿™ä¸ªå°±æ˜¯jsé‡Œé¢æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯æ”¹å˜çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯åˆ é™¤å½“å‰todoï¼Œè¿™è¿™èƒ½å‘ç°ï¼Œä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯æ‰§è¡Œäº†åˆçˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ–¹æ³•ï¼Œå¦‚ä¸‹</p>\n<pre><code class="language-javascript">this.props.changeTodoState(this.props.index, isDone);\n</code></pre>\n<p>æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œstateå°±ä¼šæ›´æ–°ï¼Œreactå°±ä¼šæ ¹æ®çŠ¶æ€é‡æ–°æ¸²æŸ“ç»„ä»¶</p>\n<h4>å…¶ä»–ç»„ä»¶</h4>\n<pre><code class="language-javascript">// AppHeader.js\nvar React = require(\'React\');\n\nvar AppHeader = React.createClass({\n    getInitialState : function() {\n        return {\n            text : ""\n        }\n    },\n    handlerKeyUp : function(event) {\n        if(event.keyCode === 13) {\n            var value = event.target.value;\n            if(!value) return false;\n\n            var newTodoItem = {\n                text : value,\n                isDone : false\n            }\n\n            event.target.value = "";\n            this.setState({text: ""});\n            this.props.addItem(newTodoItem);\n        }\n    },\n    handleChange : function(event) {\n        this.setState({text : event.target.value });\n    },\n    handlerClick : function(event) {\n        var newTodoItem = {\n            text : this.state.text,\n            isDone : false\n        }\n        this.props.addItem(newTodoItem);\n        this.setState({text: ""});\n    },\n    render : function() {\n        return (\n            &#x3C;section className="appHeader from-group">\n                &#x3C;input type="test" className="form-control" onKeyUp={this.handlerKeyUp} onChange={this.handleChange} placeholder="add one todo" value={this.state.text}/>\n                &#x3C;button className="btn btn-primary" onClick={this.handlerClick}>add one&#x3C;/button>\n            &#x3C;/section>\n        )\n    }\n})\n\nmodule.exports = AppHeader;\n</code></pre>\n<pre><code class="language-javascript">// AppHeader.js\nvar React = require(\'React\');\n\nvar AppFooter = React.createClass({\n    handleClick : function() {\n        this.props.clearDone();\n    },\n    handleAllState : function(event) {\n        this.props.changeAllState(null, event.target.value, true);\n    },\n    render : function() {\n        return (\n            &#x3C;section className="appFooter">\n                &#x3C;div>\n                    &#x3C;input type="checkbox" checked={this.props.isAllChecked} onChange={this.handleAllState}/>\n                    &#x3C;span>{this.props.doneLength}&#x3C;/span>å·²ç»å®Œæˆ / &#x3C;span>{this.props.todoLength}&#x3C;/span>æ€»æ•°\n                &#x3C;/div>\n                &#x3C;button className="btn btn-default btn-tiny pull-right" onClick={this.handleClick}>clean done&#x3C;/button>\n            &#x3C;/section>\n        )\n    }\n})\n\nmodule.exports = AppFooter;\n</code></pre>\n<p>Header Footerçš„æ–¹æ³•éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œè¾“å…¥æ”¹å˜stateï¼Œç„¶åå­˜èµ·æ¥ï¼Œæ‰§è¡Œç›¸åº”æ“ä½œæ—¶å€™é€šè¿‡propsçš„æ–¹æ³•ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œç„¶åé‡æ–°æ¸²æŸ“ç•Œé¢ã€‚</p>\n<h3>æ€»ç»“</h3>\n<p>å›å¤´çœ‹ä»£ç ï¼Œreactçš„ç»„ä»¶åŒ–ç›¸æ¯”ç°åœ¨çš„ç»„ä»¶åŒ–æ€æƒ³çœŸçš„å…ˆè¿›å¾ˆå¤šã€‚Reacté€šè¿‡çˆ¶ç»„ä»¶æ¥æ§åˆ¶çŠ¶æ€ï¼Œå¹¶é€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶ã€‚å› æ­¤æˆ‘ä»¬èƒ½å¾ˆå®¹æ˜“çœ‹å‡ºæˆ‘ä»¬çš„äº‹ä»¶å±äºå“ªä¸ªç»„ä»¶ç®¡ç†ï¼Œç„¶åä¿®æ”¹ç›¸åº”çš„æ–¹æ³•ï¼Œç»´æŠ¤èµ·æ¥ç›¸å½“é«˜æ•ˆï¼Œç›¸æ¯”ç°åœ¨çš„æ§åˆ¶domï¼Œæ¯æ¬¡ä¿®æ”¹æŒ‰é’®çš„æ–¹æ³•ï¼Œéƒ½éœ€è¦å…ˆæ‰¾åˆ°idæˆ–è€…classï¼Œç„¶åç»‘å®šå“åº”çš„æ–¹æ³•ï¼Œå‡å¦‚é¡µé¢idæˆ–è€…classæ”¹å˜ï¼Œé¡µé¢é€»è¾‘åˆéå¸¸å¤æ‚çš„è¯ï¼Œä¿®æ”¹èµ·æ¥æ˜¯ç›¸å½“éº»çƒ¦çš„ã€‚\nReactå‡­ç€å‡ºè‰²çš„è®¾è®¡æ€æƒ³å’Œæ€§èƒ½ï¼Œæˆ‘ç›¸ä¿¡ä¸ä¹…å°±ä¼šæˆä¸ºä¸»æµçš„ç§»åŠ¨ç«¯å¼€å‘æ–¹å¼ï¼Œè‡³äºPCç«¯ï¼Œå¤§å¤©æœä½ æ‡‚çš„ã€‚</p>',htmlExcerpt:"<p>å¥½ä¹…ä¹‹å‰åšå¾—ä¸€ä¸ªtodo demoï¼Œä½¿ç”¨äº†æœ€è¿‘è¾ƒç«çš„reactå’Œwebpackï¼Œç”±äºå…¬å¸ç”µè„‘å„ç§ä¸èƒ½è£…ï¼Œæ‰€ä»¥æ²¡ç”¨ä¸Šes6ï¼ˆå„ç§é™åˆ¶å¤ªæƒ¨äº†ï¼‰ï¼Œåœ¨è¿™é¡ºä¾¿åšä¸ªè®°å½•ï¼Œå¹´çºªå¤§è®°æ€§å¤ªå·®äº†ã€‚</p>\n<h3>å°ç§‘æ™®</h3>\n<p>ä»€ä¹ˆæ˜¯React? æŒ‰å®˜æ–¹è§£é‡Šï¼Œæ¡†æ¶å±äºMVCä¸­çš„viewå±‚ï¼Œç”±äºå…¶è®¾è®¡æ€æƒ³ç‹¬ç‰¹ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œé€»è¾‘ç®€å•ï¼Œæ‰€ä»¥ä¸Šå¹´å¼€å§‹è¶Šæ¥è¶Šå¤šäººå…³æ³¨ã€‚\nè‡³äºWebpackï¼Œå„ä½å®˜äººä»åå­—åº”è¯¥å¯ä»¥çŒœå‡ºï¼Œæ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä½†åˆä¸æ­¢æ˜¯ä¸ªæ‰“åŒ…å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒæ¨¡å—åŒ–çš„æ‰“åŒ…å·¥å…·ï¼Œä¸¤ä¸ªå­—å°±å¯ä»¥å½¢å®¹å®ƒçš„ä¼˜ç‚¹äº†ï¼Œå°±æ˜¯æš´åŠ›ï¼Œç©¶ç«Ÿæœ‰å¤šæš´åŠ›ï¼Œä¸‹é¢demoå°±ä¸ºå„ä½å®˜äººæ­æ™“ï¼</p>\n"}}],page:3,pages:3,total:14,limit:5,prev:"/blog/2"}}}});
//# sourceMappingURL=path---blog-3-54d146a1ac75abcd8a87.js.map